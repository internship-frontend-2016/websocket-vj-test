(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

onload = function onload() {
    var socket = io();
    //サーバーからデータを受け取る
    socket.on("pushImageFromServer", function (data) {
        //    var image = document.getElementById("image");
        console.log(data);
        init(data);
        //    image.src=data;
    });
};

function init() {
    // canvasエレメントを取得
    var c = document.getElementById('canvas');
    c.width = 500;
    c.height = 300;

    console.log("hi");
    // webglコンテキストを取得
    var gl = c.getContext('webgl') || c.getContext('experimental-webgl');
    console.log(gl);
    // 頂点シェーダとフラグメントシェーダの生成
    var v_shader = create_shader('vs');
    var f_shader = create_shader('fs');

    // プログラムオブジェクトの生成とリンク
    var prg = create_program(v_shader, f_shader);

    // attributeLocationを配列に取得
    var attLocation = new Array();
    attLocation[0] = gl.getAttribLocation(prg, 'position');
    attLocation[1] = gl.getAttribLocation(prg, 'color');
    attLocation[2] = gl.getAttribLocation(prg, 'textureCoord');

    // attributeの要素数を配列に格納
    var attStride = new Array();
    attStride[0] = 3;
    attStride[1] = 4;
    attStride[2] = 2;

    // 頂点の位置
    var position = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, -1.0, 0.0];

    // 頂点色
    var color = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];

    // テクスチャ座標
    var textureCoord = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0];

    // 頂点インデックス
    var index = [0, 1, 2, 3, 2, 1];

    // VBOとIBOの生成
    var vPosition = create_vbo(position);
    var vColor = create_vbo(color);
    var vTextureCoord = create_vbo(textureCoord);
    var VBOList = [vPosition, vColor, vTextureCoord];
    var iIndex = create_ibo(index);

    // VBOとIBOの登録
    set_attribute(VBOList, attLocation, attStride);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, iIndex);

    // uniformLocationを配列に取得
    var uniLocation = new Array();
    uniLocation[0] = gl.getUniformLocation(prg, 'mvpMatrix');
    uniLocation[1] = gl.getUniformLocation(prg, 'texture');

    // 各種行列の生成と初期化
    var m = new matIV();
    var mMatrix = m.identity(m.create());
    var vMatrix = m.identity(m.create());
    var pMatrix = m.identity(m.create());
    var tmpMatrix = m.identity(m.create());
    var mvpMatrix = m.identity(m.create());

    // ビュー×プロジェクション座標変換行列
    m.lookAt([0.0, 2.0, 5.0], [0, 0, 0], [0, 1, 0], vMatrix);
    m.perspective(45, c.width / c.height, 0.1, 100, pMatrix);
    m.multiply(pMatrix, vMatrix, tmpMatrix);

    // 深度テストを有効にする
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LEQUAL);

    // 有効にするテクスチャユニットを指定
    gl.activeTexture(gl.TEXTURE0);

    // テクスチャ用変数の宣言
    var texture = null;

    // テクスチャを生成
    create_texture("../img/test.jpg");

    // カウンタの宣言
    var count = 0;

    // 恒常ループ
    (function loop() {
        // canvasを初期化
        gl.clearColor(0.0, 0.0, 0.0, 1.0);
        gl.clearDepth(1.0);
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

        // カウンタを元にラジアンを算出
        count++;
        var rad = count % 360 * Math.PI / 180;

        // テクスチャをバインドする
        gl.bindTexture(gl.TEXTURE_2D, texture);

        // uniform変数にテクスチャを登録
        gl.uniform1i(uniLocation[1], 0);

        // モデル座標変換行列の生成
        m.identity(mMatrix);
        m.rotate(mMatrix, rad, [0, 1, 0], mMatrix);
        m.multiply(tmpMatrix, mMatrix, mvpMatrix);

        // uniform変数の登録と描画
        gl.uniformMatrix4fv(uniLocation[0], false, mvpMatrix);
        gl.drawElements(gl.TRIANGLES, index.length, gl.UNSIGNED_SHORT, 0);

        // コンテキストの再描画
        gl.flush();

        // ループのために再帰呼び出し
        //setTimeout(loop, 1000 / 30);
        requestAnimationFrame(loop);
    })();

    // シェーダを生成する関数
    function create_shader(id) {
        // シェーダを格納する変数
        var shader;

        // HTMLからscriptタグへの参照を取得
        var scriptElement = document.getElementById(id);

        // scriptタグが存在しない場合は抜ける
        if (!scriptElement) {
            return;
        }

        // scriptタグのtype属性をチェック
        switch (scriptElement.type) {

            // 頂点シェーダの場合
            case 'x-shader/x-vertex':
                shader = gl.createShader(gl.VERTEX_SHADER);
                break;

            // フラグメントシェーダの場合
            case 'x-shader/x-fragment':
                shader = gl.createShader(gl.FRAGMENT_SHADER);
                break;
            default:
                return;
        }

        // 生成されたシェーダにソースを割り当てる
        gl.shaderSource(shader, scriptElement.text);

        // シェーダをコンパイルする
        gl.compileShader(shader);

        // シェーダが正しくコンパイルされたかチェック
        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {

            // 成功していたらシェーダを返して終了
            return shader;
        } else {

            // 失敗していたらエラーログをアラートする
            alert(gl.getShaderInfoLog(shader));
        }
    }

    // プログラムオブジェクトを生成しシェーダをリンクする関数
    function create_program(vs, fs) {
        // プログラムオブジェクトの生成
        var program = gl.createProgram();

        // プログラムオブジェクトにシェーダを割り当てる
        gl.attachShader(program, vs);
        gl.attachShader(program, fs);

        // シェーダをリンク
        gl.linkProgram(program);

        // シェーダのリンクが正しく行なわれたかチェック
        if (gl.getProgramParameter(program, gl.LINK_STATUS)) {

            // 成功していたらプログラムオブジェクトを有効にする
            gl.useProgram(program);

            // プログラムオブジェクトを返して終了
            return program;
        } else {

            // 失敗していたらエラーログをアラートする
            alert(gl.getProgramInfoLog(program));
        }
    }

    // VBOを生成する関数
    function create_vbo(data) {
        // バッファオブジェクトの生成
        var vbo = gl.createBuffer();

        // バッファをバインドする
        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);

        // バッファにデータをセット
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);

        // バッファのバインドを無効化
        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        // 生成した VBO を返して終了
        return vbo;
    }

    // VBOをバインドし登録する関数
    function set_attribute(vbo, attL, attS) {
        // 引数として受け取った配列を処理する
        for (var i in vbo) {
            // バッファをバインドする
            gl.bindBuffer(gl.ARRAY_BUFFER, vbo[i]);

            // attributeLocationを有効にする
            gl.enableVertexAttribArray(attL[i]);

            // attributeLocationを通知し登録する
            gl.vertexAttribPointer(attL[i], attS[i], gl.FLOAT, false, 0, 0);
        }
    }

    // IBOを生成する関数
    function create_ibo(data) {
        // バッファオブジェクトの生成
        var ibo = gl.createBuffer();

        // バッファをバインドする
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);

        // バッファにデータをセット
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(data), gl.STATIC_DRAW);

        // バッファのバインドを無効化
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);

        // 生成したIBOを返して終了
        return ibo;
    }

    // テクスチャを生成する関数
    function create_texture(source) {
        // イメージオブジェクトの生成
        var img = new Image();

        // データのオンロードをトリガーにする
        img.onload = function () {
            // テクスチャオブジェクトの生成
            var tex = gl.createTexture();

            // テクスチャをバインドする
            gl.bindTexture(gl.TEXTURE_2D, tex);

            // テクスチャへイメージを適用
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

            // ミップマップを生成
            gl.generateMipmap(gl.TEXTURE_2D);

            // テクスチャのバインドを無効化
            gl.bindTexture(gl.TEXTURE_2D, null);

            // 生成したテクスチャをグローバル変数に代入
            texture = tex;
        };

        // イメージオブジェクトのソースを指定
        img.src = source;
    }
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFx3ZWJJbWFnZVB1c2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0NBLFNBQU8sa0JBQVU7QUFDYixRQUFJLFNBQVEsSUFBWjtBQUNBO0FBQ0EsV0FBTyxFQUFQLENBQVUscUJBQVYsRUFBZ0MsVUFBUyxJQUFULEVBQWM7QUFDOUM7QUFDSSxnQkFBUSxHQUFSLENBQVksSUFBWjtBQUNBLGFBQUssSUFBTDtBQUNKO0FBQ0MsS0FMRDtBQU1ILENBVEQ7O0FBV0EsU0FBUyxJQUFULEdBQWU7QUFDWDtBQUNBLFFBQUksSUFBSSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBUjtBQUNBLE1BQUUsS0FBRixHQUFVLEdBQVY7QUFDQSxNQUFFLE1BQUYsR0FBVyxHQUFYOztBQUVBLFlBQVEsR0FBUixDQUFZLElBQVo7QUFDQTtBQUNBLFFBQUksS0FBSyxFQUFFLFVBQUYsQ0FBYSxPQUFiLEtBQXlCLEVBQUUsVUFBRixDQUFhLG9CQUFiLENBQWxDO0FBQ0EsWUFBUSxHQUFSLENBQVksRUFBWjtBQUNBO0FBQ0EsUUFBSSxXQUFXLGNBQWMsSUFBZCxDQUFmO0FBQ0EsUUFBSSxXQUFXLGNBQWMsSUFBZCxDQUFmOztBQUVBO0FBQ0EsUUFBSSxNQUFNLGVBQWUsUUFBZixFQUF5QixRQUF6QixDQUFWOztBQUVBO0FBQ0EsUUFBSSxjQUFjLElBQUksS0FBSixFQUFsQjtBQUNBLGdCQUFZLENBQVosSUFBaUIsR0FBRyxpQkFBSCxDQUFxQixHQUFyQixFQUEwQixVQUExQixDQUFqQjtBQUNBLGdCQUFZLENBQVosSUFBaUIsR0FBRyxpQkFBSCxDQUFxQixHQUFyQixFQUEwQixPQUExQixDQUFqQjtBQUNBLGdCQUFZLENBQVosSUFBaUIsR0FBRyxpQkFBSCxDQUFxQixHQUFyQixFQUEwQixjQUExQixDQUFqQjs7QUFFQTtBQUNBLFFB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QzNCO0FBQ0EsWUFBSSxNQUFNLElBQUksS0FBSixFQUFWOztBQUVBO0FBQ0EsWUFBSSxNQUFKLEdBQWEsWUFBVTtBQUNuQjtBQUNBLGdCQUFJLE1BQU0sR0FBRyxhQUFILEVBQVY7O0FBRUE7QUFDQSxlQUFHLFdBQUgsQ0FBZSxHQUFHLFVBQWxCLEVBQThCLEdBQTlCOztBQUVBO0FBQ0EsZUFBRyxVQUFILENBQWMsR0FBRyxVQUFqQixFQUE2QixDQUE3QixFQUFnQyxHQUFHLElBQW5DLEVBQXlDLEdBQUcsSUFBNUMsRUFBa0QsR0FBRyxhQUFyRCxFQUFvRSxHQUFwRTtBQUNKLGVBQUcsYUFBSCxDQUFpQixHQUFHLFVBQXBCLEVBQStCLEdBQUcsa0JBQWxDLEVBQXFELEdBQUcsTUFBeEQ7QUFDQSxlQUFHLGFBQUgsQ0FBaUIsR0FBRyxVQUFwQixFQUErQixHQUFHLGtCQUFsQyxFQUFxRCxHQUFHLE1BQXhEO0FBQ0EsZUFBRyxhQUFILENBQWlCLEdBQUcsVUFBcEIsRUFBK0IsR0FBRyxjQUFsQyxFQUFpRCxHQUFHLGFBQXBEO0FBQ0EsZUFBRyxhQUFILENBQWlCLEdBQUcsVUFBcEIsRUFBK0IsR0FBRyxjQUFsQyxFQUFpRCxHQUFHLGFBQXBEOztBQUdJO0FBQ0EsZUFBRyxjQUFILENBQWtCLEdBQUcsVUFBckI7O0FBRUE7QUFDQSxlQUFHLFdBQUgsQ0FBZSxHQUFHLFVBQWxCLEVBQThCLElBQTlCOztBQUVBO0FBQ0Esc0JBQVUsR0FBVjtBQUNILFNBdkJEOztBQXlCQTtBQUNBLFlBQUksR0FBSixHQUFVLE1BQVY7QUFDSDtBQUVKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxyXG5vbmxvYWQ9ZnVuY3Rpb24oKXtcclxuICAgIHZhciBzb2NrZXQgPWlvKCk7XHJcbiAgICAvL+OCteODvOODkOODvOOBi+OCieODh+ODvOOCv+OCkuWPl+OBkeWPluOCi1xyXG4gICAgc29ja2V0Lm9uKFwicHVzaEltYWdlRnJvbVNlcnZlclwiLGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgLy8gICAgdmFyIGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICBpbml0KGRhdGEpO1xyXG4gICAgLy8gICAgaW1hZ2Uuc3JjPWRhdGE7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpe1xyXG4gICAgLy8gY2FudmFz44Ko44Os44Oh44Oz44OI44KS5Y+W5b6XXHJcbiAgICB2YXIgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuICAgIGMud2lkdGggPSA1MDA7XHJcbiAgICBjLmhlaWdodCA9IDMwMDtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coXCJoaVwiKTtcclxuICAgIC8vIHdlYmds44Kz44Oz44OG44Kt44K544OI44KS5Y+W5b6XXHJcbiAgICB2YXIgZ2wgPSBjLmdldENvbnRleHQoJ3dlYmdsJykgfHwgYy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKTtcclxuICAgIGNvbnNvbGUubG9nKGdsKTtcclxuICAgIC8vIOmggueCueOCt+OCp+ODvOODgOOBqOODleODqeOCsOODoeODs+ODiOOCt+OCp+ODvOODgOOBrueUn+aIkFxyXG4gICAgdmFyIHZfc2hhZGVyID0gY3JlYXRlX3NoYWRlcigndnMnKTtcclxuICAgIHZhciBmX3NoYWRlciA9IGNyZWF0ZV9zaGFkZXIoJ2ZzJyk7XHJcbiAgICBcclxuICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkOOBqOODquODs+OCr1xyXG4gICAgdmFyIHByZyA9IGNyZWF0ZV9wcm9ncmFtKHZfc2hhZGVyLCBmX3NoYWRlcik7XHJcbiAgICBcclxuICAgIC8vIGF0dHJpYnV0ZUxvY2F0aW9u44KS6YWN5YiX44Gr5Y+W5b6XXHJcbiAgICB2YXIgYXR0TG9jYXRpb24gPSBuZXcgQXJyYXkoKTtcclxuICAgIGF0dExvY2F0aW9uWzBdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAncG9zaXRpb24nKTtcclxuICAgIGF0dExvY2F0aW9uWzFdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAnY29sb3InKTtcclxuICAgIGF0dExvY2F0aW9uWzJdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAndGV4dHVyZUNvb3JkJyk7XHJcbiAgICBcclxuICAgIC8vIGF0dHJpYnV0ZeOBruimgee0oOaVsOOCkumFjeWIl+OBq+agvOe0jVxyXG4gICAgdmFyIGF0dFN0cmlkZSA9IG5ldyBBcnJheSgpO1xyXG4gICAgYXR0U3RyaWRlWzBdID0gMztcclxuICAgIGF0dFN0cmlkZVsxXSA9IDQ7XHJcbiAgICBhdHRTdHJpZGVbMl0gPSAyO1xyXG4gICAgXHJcbiAgICAvLyDpoILngrnjga7kvY3nva5cclxuICAgIHZhciBwb3NpdGlvbiA9IFtcclxuICAgICAgICAtMS4wLCAgMS4wLCAgMC4wLFxyXG4gICAgICAgICAxLjAsICAxLjAsICAwLjAsXHJcbiAgICAgICAgLTEuMCwgLTEuMCwgIDAuMCxcclxuICAgICAgICAgMS4wLCAtMS4wLCAgMC4wXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyDpoILngrnoibJcclxuICAgIHZhciBjb2xvciA9IFtcclxuICAgICAgICAxLjAsIDEuMCwgMS4wLCAxLjAsXHJcbiAgICAgICAgMS4wLCAxLjAsIDEuMCwgMS4wLFxyXG4gICAgICAgIDEuMCwgMS4wLCAxLjAsIDEuMCxcclxuICAgICAgICAxLjAsIDEuMCwgMS4wLCAxLjBcclxuICAgIF07XHJcbiAgICBcclxuICAgIC8vIOODhuOCr+OCueODgeODo+W6p+aomVxyXG4gICAgdmFyIHRleHR1cmVDb29yZCA9IFtcclxuICAgICAgICAwLjAsIDAuMCxcclxuICAgICAgICAxLjAsIDAuMCxcclxuICAgICAgICAwLjAsIDEuMCxcclxuICAgICAgICAxLjAsIDEuMFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgLy8g6aCC54K544Kk44Oz44OH44OD44Kv44K5XHJcbiAgICB2YXIgaW5kZXggPSBbXHJcbiAgICAgICAgMCwgMSwgMixcclxuICAgICAgICAzLCAyLCAxXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyBWQk/jgahJQk/jga7nlJ/miJBcclxuICAgIHZhciB2UG9zaXRpb24gICAgID0gY3JlYXRlX3Zibyhwb3NpdGlvbik7XHJcbiAgICB2YXIgdkNvbG9yICAgICAgICA9IGNyZWF0ZV92Ym8oY29sb3IpO1xyXG4gICAgdmFyIHZUZXh0dXJlQ29vcmQgPSBjcmVhdGVfdmJvKHRleHR1cmVDb29yZCk7XHJcbiAgICB2YXIgVkJPTGlzdCAgICAgICA9IFt2UG9zaXRpb24sIHZDb2xvciwgdlRleHR1cmVDb29yZF07XHJcbiAgICB2YXIgaUluZGV4ICAgICAgICA9IGNyZWF0ZV9pYm8oaW5kZXgpO1xyXG4gICAgXHJcbiAgICAvLyBWQk/jgahJQk/jga7nmbvpjLJcclxuICAgIHNldF9hdHRyaWJ1dGUoVkJPTGlzdCwgYXR0TG9jYXRpb24sIGF0dFN0cmlkZSk7XHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpSW5kZXgpO1xyXG4gICAgXHJcbiAgICAvLyB1bmlmb3JtTG9jYXRpb27jgpLphY3liJfjgavlj5blvpdcclxuICAgIHZhciB1bmlMb2NhdGlvbiA9IG5ldyBBcnJheSgpO1xyXG4gICAgdW5pTG9jYXRpb25bMF0gID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZywgJ212cE1hdHJpeCcpO1xyXG4gICAgdW5pTG9jYXRpb25bMV0gID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZywgJ3RleHR1cmUnKTtcclxuICAgIFxyXG4gICAgLy8g5ZCE56iu6KGM5YiX44Gu55Sf5oiQ44Go5Yid5pyf5YyWXHJcbiAgICB2YXIgbSA9IG5ldyBtYXRJVigpO1xyXG4gICAgdmFyIG1NYXRyaXggICA9IG0uaWRlbnRpdHkobS5jcmVhdGUoKSk7XHJcbiAgICB2YXIgdk1hdHJpeCAgID0gbS5pZGVudGl0eShtLmNyZWF0ZSgpKTtcclxuICAgIHZhciBwTWF0cml4ICAgPSBtLmlkZW50aXR5KG0uY3JlYXRlKCkpO1xyXG4gICAgdmFyIHRtcE1hdHJpeCA9IG0uaWRlbnRpdHkobS5jcmVhdGUoKSk7XHJcbiAgICB2YXIgbXZwTWF0cml4ID0gbS5pZGVudGl0eShtLmNyZWF0ZSgpKTtcclxuICAgIFxyXG4gICAgLy8g44OT44Ol44O8w5fjg5fjg63jgrjjgqfjgq/jgrfjg6fjg7PluqfmqJnlpInmj5vooYzliJdcclxuICAgIG0ubG9va0F0KFswLjAsIDIuMCwgNS4wXSwgWzAsIDAsIDBdLCBbMCwgMSwgMF0sIHZNYXRyaXgpO1xyXG4gICAgbS5wZXJzcGVjdGl2ZSg0NSwgYy53aWR0aCAvIGMuaGVpZ2h0LCAwLjEsIDEwMCwgcE1hdHJpeCk7XHJcbiAgICBtLm11bHRpcGx5KHBNYXRyaXgsIHZNYXRyaXgsIHRtcE1hdHJpeCk7XHJcbiAgICBcclxuICAgIC8vIOa3seW6puODhuOCueODiOOCkuacieWKueOBq+OBmeOCi1xyXG4gICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xyXG4gICAgZ2wuZGVwdGhGdW5jKGdsLkxFUVVBTCk7XHJcbiAgICBcclxuICAgIC8vIOacieWKueOBq+OBmeOCi+ODhuOCr+OCueODgeODo+ODpuODi+ODg+ODiOOCkuaMh+WumlxyXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XHJcbiAgICBcclxuICAgIC8vIOODhuOCr+OCueODgeODo+eUqOWkieaVsOOBruWuo+iogFxyXG4gICAgdmFyIHRleHR1cmUgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvLyDjg4bjgq/jgrnjg4Hjg6PjgpLnlJ/miJBcclxuICAgIGNyZWF0ZV90ZXh0dXJlKFwiLi4vaW1nL3Rlc3QuanBnXCIpO1xyXG4gICAgXHJcbiAgICAvLyDjgqvjgqbjg7Pjgr/jga7lrqPoqIBcclxuICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICBcclxuICAgIC8vIOaBkuW4uOODq+ODvOODl1xyXG4gICAgKGZ1bmN0aW9uIGxvb3AoKXtcclxuICAgICAgICAvLyBjYW52YXPjgpLliJ3mnJ/ljJZcclxuICAgICAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgZ2wuY2xlYXJEZXB0aCgxLjApO1xyXG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjgqvjgqbjg7Pjgr/jgpLlhYPjgavjg6njgrjjgqLjg7PjgpLnrpflh7pcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIHZhciByYWQgPSAoY291bnQgJSAzNjApICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6PjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyB1bmlmb3Jt5aSJ5pWw44Gr44OG44Kv44K544OB44Oj44KS55m76YyyXHJcbiAgICAgICAgZ2wudW5pZm9ybTFpKHVuaUxvY2F0aW9uWzFdLCAwKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg6Ljg4fjg6vluqfmqJnlpInmj5vooYzliJfjga7nlJ/miJBcclxuICAgICAgICBtLmlkZW50aXR5KG1NYXRyaXgpO1xyXG4gICAgICAgIG0ucm90YXRlKG1NYXRyaXgsIHJhZCwgWzAsIDEsIDBdLCBtTWF0cml4KTtcclxuICAgICAgICBtLm11bHRpcGx5KHRtcE1hdHJpeCwgbU1hdHJpeCwgbXZwTWF0cml4KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyB1bmlmb3Jt5aSJ5pWw44Gu55m76Yyy44Go5o+P55S7XHJcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdih1bmlMb2NhdGlvblswXSwgZmFsc2UsIG12cE1hdHJpeCk7XHJcbiAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgaW5kZXgubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44Kz44Oz44OG44Kt44K544OI44Gu5YaN5o+P55S7XHJcbiAgICAgICAgZ2wuZmx1c2goKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg6vjg7zjg5fjga7jgZ/jgoHjgavlho3luLDlkbzjgbPlh7rjgZdcclxuICAgICAgICAvL3NldFRpbWVvdXQobG9vcCwgMTAwMCAvIDMwKTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgICB9KSgpO1xyXG4gICAgXHJcbiAgICAvLyDjgrfjgqfjg7zjg4DjgpLnlJ/miJDjgZnjgovplqLmlbBcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZV9zaGFkZXIoaWQpe1xyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOCkuagvOe0jeOBmeOCi+WkieaVsFxyXG4gICAgICAgIHZhciBzaGFkZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSFRNTOOBi+OCiXNjcmlwdOOCv+OCsOOBuOOBruWPgueFp+OCkuWPluW+l1xyXG4gICAgICAgIHZhciBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNjcmlwdOOCv+OCsOOBjOWtmOWcqOOBl+OBquOBhOWgtOWQiOOBr+aKnOOBkeOCi1xyXG4gICAgICAgIGlmKCFzY3JpcHRFbGVtZW50KXtyZXR1cm47fVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNjcmlwdOOCv+OCsOOBrnR5cGXlsZ7mgKfjgpLjg4Hjgqfjg4Pjgq9cclxuICAgICAgICBzd2l0Y2goc2NyaXB0RWxlbWVudC50eXBlKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOmggueCueOCt+OCp+ODvOODgOOBruWgtOWQiFxyXG4gICAgICAgICAgICBjYXNlICd4LXNoYWRlci94LXZlcnRleCc6XHJcbiAgICAgICAgICAgICAgICBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDjg5Xjg6njgrDjg6Hjg7Pjg4jjgrfjgqfjg7zjg4Djga7loLTlkIhcclxuICAgICAgICAgICAgY2FzZSAneC1zaGFkZXIveC1mcmFnbWVudCc6XHJcbiAgICAgICAgICAgICAgICBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0IDpcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g55Sf5oiQ44GV44KM44Gf44K344Kn44O844OA44Gr44K944O844K544KS5Ymy44KK5b2T44Gm44KLXHJcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2NyaXB0RWxlbWVudC50ZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjgrfjgqfjg7zjg4DjgpLjgrPjg7Pjg5HjgqTjg6vjgZnjgotcclxuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44K344Kn44O844OA44GM5q2j44GX44GP44Kz44Oz44OR44Kk44Or44GV44KM44Gf44GL44OB44Kn44OD44KvXHJcbiAgICAgICAgaWYoZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOaIkOWKn+OBl+OBpuOBhOOBn+OCieOCt+OCp+ODvOODgOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g5aSx5pWX44GX44Gm44GE44Gf44KJ44Ko44Op44O844Ot44Kw44KS44Ki44Op44O844OI44GZ44KLXHJcbiAgICAgICAgICAgIGFsZXJ0KGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLnlJ/miJDjgZfjgrfjgqfjg7zjg4DjgpLjg6rjg7Pjgq/jgZnjgovplqLmlbBcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZV9wcm9ncmFtKHZzLCBmcyl7XHJcbiAgICAgICAgLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44Gu55Sf5oiQXHJcbiAgICAgICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44Gr44K344Kn44O844OA44KS5Ymy44KK5b2T44Gm44KLXHJcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZzKTtcclxuICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOCkuODquODs+OCr1xyXG4gICAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOBruODquODs+OCr+OBjOato+OBl+OBj+ihjOOBquOCj+OCjOOBn+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgICAgIGlmKGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8g5oiQ5Yqf44GX44Gm44GE44Gf44KJ44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44KS5pyJ5Yq544Gr44GZ44KLXHJcbiAgICAgICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZfjgabntYLkuoZcclxuICAgICAgICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDlpLHmlZfjgZfjgabjgYTjgZ/jgonjgqjjg6njg7zjg63jgrDjgpLjgqLjg6njg7zjg4jjgZnjgotcclxuICAgICAgICAgICAgYWxlcnQoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVkJP44KS55Sf5oiQ44GZ44KL6Zai5pWwXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVfdmJvKGRhdGEpe1xyXG4gICAgICAgIC8vIOODkOODg+ODleOCoeOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgICAgIHZhciB2Ym8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmJvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgavjg4fjg7zjgr/jgpLjgrvjg4Pjg4hcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOODkOODg+ODleOCoeOBruODkOOCpOODs+ODieOCkueEoeWKueWMllxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDnlJ/miJDjgZfjgZ8gVkJPIOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgIHJldHVybiB2Ym87XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFZCT+OCkuODkOOCpOODs+ODieOBl+eZu+mMsuOBmeOCi+mWouaVsFxyXG4gICAgZnVuY3Rpb24gc2V0X2F0dHJpYnV0ZSh2Ym8sIGF0dEwsIGF0dFMpe1xyXG4gICAgICAgIC8vIOW8leaVsOOBqOOBl+OBpuWPl+OBkeWPluOBo+OBn+mFjeWIl+OCkuWHpueQhuOBmeOCi1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiB2Ym8pe1xyXG4gICAgICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZib1tpXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVMb2NhdGlvbuOCkuacieWKueOBq+OBmeOCi1xyXG4gICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRMW2ldKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZUxvY2F0aW9u44KS6YCa55+l44GX55m76Yyy44GZ44KLXHJcbiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0TFtpXSwgYXR0U1tpXSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIElCT+OCkueUn+aIkOOBmeOCi+mWouaVsFxyXG4gICAgZnVuY3Rpb24gY3JlYXRlX2libyhkYXRhKXtcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgaWJvID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44OQ44OD44OV44Kh44KS44OQ44Kk44Oz44OJ44GZ44KLXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaWJvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgavjg4fjg7zjgr/jgpLjgrvjg4Pjg4hcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgSW50MTZBcnJheShkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOODkOODg+ODleOCoeOBruODkOOCpOODs+ODieOCkueEoeWKueWMllxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOeUn+aIkOOBl+OBn0lCT+OCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgIHJldHVybiBpYm87XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOODhuOCr+OCueODgeODo+OCkueUn+aIkOOBmeOCi+mWouaVsFxyXG4gICAgZnVuY3Rpb24gY3JlYXRlX3RleHR1cmUoc291cmNlKXtcclxuICAgICAgICAvLyDjgqTjg6Hjg7zjgrjjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44OH44O844K/44Gu44Kq44Oz44Ot44O844OJ44KS44OI44Oq44Ks44O844Gr44GZ44KLXHJcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8vIOODhuOCr+OCueODgeODo+OCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgICAgICAgICB2YXIgdGV4ID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g44OG44Kv44K544OB44Oj44KS44OQ44Kk44Oz44OJ44GZ44KLXHJcbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6PjgbjjgqTjg6Hjg7zjgrjjgpLpgannlKhcclxuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBpbWcpO1xyXG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX01BR19GSUxURVIsZ2wuTElORUFSKTtcclxuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsZ2wuVEVYVFVSRV9NSU5fRklMVEVSLGdsLkxJTkVBUik7XHJcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELGdsLlRFWFRVUkVfV1JBUF9TLGdsLkNMQU1QX1RPX0VER0UpO1xyXG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCxnbC5URVhUVVJFX1dSQVBfVCxnbC5DTEFNUF9UT19FREdFKTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyDjg5/jg4Pjg5fjg57jg4Pjg5fjgpLnlJ/miJBcclxuICAgICAgICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjga7jg5DjgqTjg7Pjg4njgpLnhKHlirnljJZcclxuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDnlJ/miJDjgZfjgZ/jg4bjgq/jgrnjg4Hjg6PjgpLjgrDjg63jg7zjg5Djg6vlpInmlbDjgavku6PlhaVcclxuICAgICAgICAgICAgdGV4dHVyZSA9IHRleDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOOCpOODoeODvOOCuOOCquODluOCuOOCp+OCr+ODiOOBruOCveODvOOCueOCkuaMh+WumlxyXG4gICAgICAgIGltZy5zcmMgPSBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBcclxufTsiXX0=
