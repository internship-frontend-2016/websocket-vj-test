(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var canvas;
var submitCanvas;
window.onload = function () {
	var socket = io();
	canvas = document.getElementById("myCanvas");
	submitCanvas = document.getElementById("submitCanvas");
	var subc = submitCanvas.getContext("2d");
	var c = canvas.getContext("2d");

	var w = 316;
	var h = 316;
	var drawing = false;
	var oldPos;

	canvas.width = w;
	canvas.height = h;

	//送信する側のキャンバス
	submitCanvas.width = w;
	submitCanvas.height = h;

	c.strokeStyle = "black";
	c.lineWidth = 5;
	c.lineJoin = "round";
	c.lineCap = "round";

	//タップ開始時に、絵を描く準備をする
	canvas.addEventListener("touchstart", function (e) {
		drawing = true;
		oldPos = getPosT(e, canvas);
	}, false);

	//タップ終了時に、絵を描く後処理を行う
	canvas.addEventListener("touched", function () {
		drawing = false;
	}, false);

	//gestureイベント（2本指以上触ると発生する）
	//終了時にも絵を描く後処理を行う
	canvas.addEventListener("gestureend", function () {
		console.log("mouseout");
		drawing = false;
	}, false);

	//実際に絵を書く処理
	//前回保存した位置から現在の位置に線を引く
	canvas.addEventListener("touchmove", function (e) {
		var pos = getPosT(e, canvas);
		if (drawing) {
			c.beginPath();
			c.moveTo(oldPos.x, oldPos.y);
			c.lineTo(pos.x, pos.y);
			c.stroke();
			c.closePath();
			oldPos = pos;
		}
	}, false);
	//色と線の太さを設定する
	setEventButtonColor("black", c);
	setEventButtonColor("blue", c);
	setEventButtonColor("red", c);
	setEventButtonColor("green", c);

	setEventLineWidth("small", c);
	setEventLineWidth("middle", c);
	setEventLineWidth("large", c);

	document.getElementById("delete_button").addEventListener("click", function () {
		c.clearRect(0, 0, $(canvas).width(), $(canvas).height());
	}, false);

	//ドキュメントのタッチイベントの初期化
	document.addEventListener("touchstart", stopDefault, false);
	document.addEventListener("touchmove", stopDefault, false);
	//document.addEventListener("touchend",stopDefault,false);
	//ドキュメントのジェスチャーイベントの初期化
	document.addEventListener("gesturestart", stopDefault, false);
	document.addEventListener("gesturechange", stopDefault, false);
	//document.addEventListener("gestureend",stopDefault,false);


	//画像をサーバーに送信する処理
	//var toImage=document.getElementById("toImage_AppearBack");
	document.getElementById("toImage_AppearBack").addEventListener("click", function () {
		var image = createbase64();
		console.log(image);
		socket.emit("pushImageFromClient", {
			imgdata: image,
			AppearBack: true
		});
	}, false);
	document.getElementById("toImage_DropFromUp").addEventListener("click", function () {
		var image = createbase64();
		console.log(image);
		socket.emit("pushImageFromClient", {
			imgdata: image,
			DropFromUp: true
		});
	}, false);

	var subPos;
	var normalPosX, normalPosY;
	var image;
	var sentFlag;
	var sendingTimer;
	/*-------------画像を送信する--------------*/

	submitCanvas.addEventListener("touchstart", function (e) {
		sentFlag = true;
		subPos = getPosT(e, submitCanvas);
		normalPosX = (subPos.x * 2 - w) / w;
		normalPosY = -((subPos.y * 2 - h) / h);
		image = createbase64();
		sendingTimer = setInterval(sentdata, 100);
	}, false);

	submitCanvas.addEventListener("touchmove", function (e) {
		//sentFlag=true;
		subPos = getPosT(e, submitCanvas);
		normalPosX = (subPos.x * 2 - w) / w;
		normalPosY = -((subPos.y * 2 - h) / h);
		image = createbase64();
	}, false);
	submitCanvas.addEventListener("touchend", function () {
		sentFlag = false;
		console.log("touchend");
		clearInterval(sendingTimer);
	}, false);

	function sentdata() {
		console.log("sentdata_function");

		socket.emit("pushImageFromClient", {
			imgdata: image,
			x: normalPosX,
			y: normalPosY
		});
	}
};
function createbase64() {
	var data = canvas.toDataURL("image/png");
	var imageContents = document.getElementById("imageContents");
	imageContents.innerHTML = "<img src='" + data + "'>";
	return data;
}
//タップ関連関数
function scrollX() {
	return document.documentElement.scrollLeft || document.body.scrollLeft;
}
function scrollY() {
	return document.documentElement.scrollTop || document.body.scrollTop;
}
function getPosT(_e, _canvas) {
	var mouseX = _e.touches[0].clientX - $(_canvas).position().left + scrollX();
	var mouseY = _e.touches[0].clientY - $(_canvas).position().top + scrollY();
	return { x: mouseX, y: mouseY };
}
function setEventButtonColor(_id, _c) {
	console.log(_id);
	document.getElementById(_id).addEventListener("click", function () {
		console.log(_id);
		_c.strokeStyle = _id;
	}, false);
}

function setEventLineWidth(_id, _c) {
	document.getElementById(_id).addEventListener("click", function () {
		console.log(_id + "_click");
		var strokewidth;
		switch (_id) {
			case "small":
				strokewidth = 5;
				break;
			case "middle":
				strokewidth = 10;
				break;
			case "large":
				strokewidth = 20;
				break;
			default:
				break;
		}
		console.log(strokewidth);
		_c.lineWidth = strokewidth;
	}, false);
}

//ブラウザのデフォルト動作を禁止する
function stopDefault(e) {
	if (e.touches[0].target.tagName.toLowerCase() == "li") {
		//console.log(e.touches[0].target.tagName.toLowerCase());
		return;
	}
	if (e.touches[0].target.tagName.toLowerCase() == "div") {
		return;
	}
	if (e.touches[0].target.tagName.toLowerCase() == "input") {
		return;
	}
	e.preventDefault();
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFx2ai1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLE1BQUo7QUFDQSxJQUFJLFlBQUo7QUFDQSxPQUFPLE1BQVAsR0FBYyxZQUFVO0FBQ3ZCLEtBQUksU0FBTyxJQUFYO0FBQ0EsVUFBTyxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBUDtBQUNBLGdCQUFhLFNBQVMsY0FBVCxDQUF3QixjQUF4QixDQUFiO0FBQ0EsS0FBSSxPQUFLLGFBQWEsVUFBYixDQUF3QixJQUF4QixDQUFUO0FBQ0EsS0FBSSxJQUFFLE9BQU8sVUFBUCxDQUFrQixJQUFsQixDQUFOOztBQUVBLEtBQUksSUFBRSxHQUFOO0FBQ0EsS0FBSSxJQUFFLEdBQU47QUFDQSxLQUFJLFVBQVEsS0FBWjtBQUNBLEtBQUksTUFBSjs7QUFFQSxRQUFPLEtBQVAsR0FBYSxDQUFiO0FBQ0EsUUFBTyxNQUFQLEdBQWMsQ0FBZDs7QUFFQTtBQUNBLGNBQWEsS0FBYixHQUFtQixDQUFuQjtBQUNBLGNBQWEsTUFBYixHQUFvQixDQUFwQjs7QUFFQSxHQUFFLFdBQUYsR0FBYyxPQUFkO0FBQ0EsR0FBRSxTQUFGLEdBQVksQ0FBWjtBQUNBLEdBQUUsUUFBRixHQUFXLE9BQVg7QUFDQSxHQUFFLE9BQUYsR0FBVSxPQUFWOztBQUVBO0FBQ0EsUUFBTyxnQkFBUCxDQUF3QixZQUF4QixFQUFxQyxVQUFTLENBQVQsRUFBVztBQUMvQyxZQUFRLElBQVI7QUFDQSxXQUFPLFFBQVEsQ0FBUixFQUFVLE1BQVYsQ0FBUDtBQUNBLEVBSEQsRUFHRSxLQUhGOztBQUtBO0FBQ0EsUUFBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFrQyxZQUFVO0FBQzNDLFlBQVEsS0FBUjtBQUNBLEVBRkQsRUFFRSxLQUZGOztBQUlBO0FBQ0E7QUFDQSxRQUFPLGdC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O0FBQ3RCLEtBQUcsRUFBRSxPQUFGLENBQVUsQ0FBVixFQUFhLE1BQWIsQ0FBb0IsT0FBcEIsQ0FBNEIsV0FBNUIsTUFBNkMsSUFBaEQsRUFBcUQ7QUFDcEQ7QUFDQTtBQUNBO0FBQ0QsS0FBRyxFQUFFLE9BQUYsQ0FBVSxDQUFWLEVBQWEsTUFBYixDQUFvQixPQUFwQixDQUE0QixXQUE1QixNQUEyQyxLQUE5QyxFQUFvRDtBQUNuRDtBQUNBO0FBQ0QsS0FBRyxFQUFFLE9BQUYsQ0FBVSxDQUFWLEVBQWEsTUFBYixDQUFvQixPQUFwQixDQUE0QixXQUE1QixNQUEyQyxPQUE5QyxFQUFzRDtBQUNyRDtBQUNBO0FBQ0QsR0FBRSxjQUFGO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIGNhbnZhcztcclxudmFyIHN1Ym1pdENhbnZhcztcclxud2luZG93Lm9ubG9hZD1mdW5jdGlvbigpe1xyXG5cdHZhciBzb2NrZXQ9aW8oKTtcclxuXHRjYW52YXM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcclxuXHRzdWJtaXRDYW52YXM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRDYW52YXNcIik7XHJcblx0dmFyIHN1YmM9c3VibWl0Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHR2YXIgYz1jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuXHR2YXIgdz0zMTY7XHJcblx0dmFyIGg9MzE2O1xyXG5cdHZhciBkcmF3aW5nPWZhbHNlO1xyXG5cdHZhciBvbGRQb3M7XHJcblxyXG5cdGNhbnZhcy53aWR0aD13O1xyXG5cdGNhbnZhcy5oZWlnaHQ9aDtcclxuXHJcblx0Ly/pgIHkv6HjgZnjgovlgbTjga7jgq3jg6Pjg7Pjg5DjgrlcclxuXHRzdWJtaXRDYW52YXMud2lkdGg9dztcclxuXHRzdWJtaXRDYW52YXMuaGVpZ2h0PWg7XHJcblxyXG5cdGMuc3Ryb2tlU3R5bGU9XCJibGFja1wiO1xyXG5cdGMubGluZVdpZHRoPTU7XHJcblx0Yy5saW5lSm9pbj1cInJvdW5kXCI7XHJcblx0Yy5saW5lQ2FwPVwicm91bmRcIjtcclxuXHJcblx0Ly/jgr/jg4Pjg5fplovlp4vmmYLjgavjgIHntbXjgpLmj4/jgY/mupblgpnjgpLjgZnjgotcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixmdW5jdGlvbihlKXtcclxuXHRcdGRyYXdpbmc9dHJ1ZTtcclxuXHRcdG9sZFBvcz1nZXRQb3NUKGUsY2FudmFzKTtcclxuXHR9LGZhbHNlKTtcclxuXHJcblx0Ly/jgr/jg4Pjg5fntYLkuobmmYLjgavjgIHntbXjgpLmj4/jgY/lvozlh6bnkIbjgpLooYzjgYZcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZWRcIixmdW5jdGlvbigpe1xyXG5cdFx0ZHJhd2luZz1mYWxzZVxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL2dlc3R1cmXjgqTjg5njg7Pjg4jvvIgy5pys5oyH5Lul5LiK6Kem44KL44Go55m655Sf44GZ44KL77yJXHJcblx0Ly/ntYLkuobmmYLjgavjgoLntbXjgpLmj4/jgY/lvozlh6bnkIbjgpLooYzjgYZcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVlbmRcIixmdW5jdGlvbigpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJtb3VzZW91dFwiKTtcclxuXHRcdGRyYXdpbmc9ZmFsc2U7XHJcblx0fSxmYWxzZSk7XHJcblxyXG5cdC8v5a6f6Zqb44Gr57W144KS5pu444GP5Yem55CGXHJcblx0Ly/liY3lm57kv53lrZjjgZfjgZ/kvY3nva7jgYvjgonnj77lnKjjga7kvY3nva7jgavnt5rjgpLlvJXjgY9cclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe1xyXG5cdHZhciBwb3MgPSBnZXRQb3NUKGUsY2FudmFzKTtcclxuXHRcdGlmKGRyYXdpbmcpe1xyXG5cdFx0XHRjLmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRjLm1vdmVUbyhvbGRQb3MueCxvbGRQb3MueSk7XHJcblx0XHRcdGMubGluZVRvKHBvcy54LHBvcy55KTtcclxuXHRcdFx0Yy5zdHJva2UoKTtcclxuXHRcdFx0Yy5jbG9zZVBhdGgoKTtcclxuXHRcdFx0b2xkUG9zPXBvcztcclxuXHRcdH1cclxuXHR9LGZhbHNlKTtcclxuXHQvL+iJsuOBqOe3muOBruWkquOBleOCkuioreWumuOBmeOCi1xyXG5cdHNldEV2ZW50QnV0dG9uQ29sb3IoXCJibGFja1wiLGMpO1xyXG5cdHNldEV2ZW50QnV0dG9uQ29sb3IoXCJibHVlXCIsYyk7XHJcblx0c2V0RXZlbnRCdXR0b25Db2xvcihcInJlZFwiLGMpO1xyXG5cdHNldEV2ZW50QnV0dG9uQ29sb3IoXCJncmVlblwiLGMpO1xyXG5cclxuXHRzZXRFdmVudExpbmVXaWR0aChcInNtYWxsXCIsYyk7XHJcblx0c2V0RXZlbnRMaW5lV2lkdGgoXCJtaWRkbGVcIixjKTtcclxuXHRzZXRFdmVudExpbmVXaWR0aChcImxhcmdlXCIsYyk7XHJcblxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlX2J1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0Yy5jbGVhclJlY3QoMCwwLCQoY2FudmFzKS53aWR0aCgpLCQoY2FudmFzKS5oZWlnaHQoKSk7XHRcdFxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL+ODieOCreODpeODoeODs+ODiOOBruOCv+ODg+ODgeOCpOODmeODs+ODiOOBruWIneacn+WMllxyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0Ly9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0Ly/jg4njgq3jg6Xjg6Hjg7Pjg4jjga7jgrjjgqfjgrnjg4Hjg6Pjg7zjgqTjg5njg7Pjg4jjga7liJ3mnJ/ljJZcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZXN0YXJ0XCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlY2hhbmdlXCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVlbmRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblxyXG5cclxuXHJcblx0Ly/nlLvlg4/jgpLjgrXjg7zjg5Djg7zjgavpgIHkv6HjgZnjgovlh6bnkIZcclxuXHQvL3ZhciB0b0ltYWdlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9JbWFnZV9BcHBlYXJCYWNrXCIpO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9JbWFnZV9BcHBlYXJCYWNrXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgaW1hZ2U9Y3JlYXRlYmFzZTY0KCk7XHJcblx0XHRjb25zb2xlLmxvZyhpbWFnZSk7XHJcblx0XHRzb2NrZXQuZW1pdChcInB1c2hJbWFnZUZyb21DbGllbnRcIix7XHJcblx0XHRcdGltZ2RhdGE6aW1hZ2UsXHJcblx0XHRcdEFwcGVhckJhY2s6dHJ1ZVxyXG5cdFx0fSk7XHJcblx0fSxmYWxzZSk7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b0ltYWdlX0Ryb3BGcm9tVXBcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdHZhciBpbWFnZT1jcmVhdGViYXNlNjQoKTtcclxuXHRcdGNvbnNvbGUubG9nKGltYWdlKTtcclxuXHRcdHNvY2tldC5lbWl0KFwicHVzaEltYWdlRnJvbUNsaWVudFwiLHtcclxuXHRcdFx0aW1nZGF0YTppbWFnZSxcclxuXHRcdFx0RHJvcEZyb21VcDp0cnVlXHJcblx0XHR9KTtcclxuXHR9LGZhbHNlKTtcclxuXHJcblx0dmFyIHN1YlBvcztcclxuXHR2YXIgbm9ybWFsUG9zWCxub3JtYWxQb3NZO1xyXG5cdHZhciBpbWFnZTtcclxuXHR2YXIgc2VudEZsYWc7XHJcblx0dmFyIHNlbmRpbmdUaW1lcjtcclxuXHQvKi0tLS0tLS0tLS0tLS3nlLvlg4/jgpLpgIHkv6HjgZnjgostLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdHN1Ym1pdENhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0c2VudEZsYWc9dHJ1ZTtcclxuXHRcdHN1YlBvcz1nZXRQb3NUKGUsc3VibWl0Q2FudmFzKTtcclxuXHRcdG5vcm1hbFBvc1g9KHN1YlBvcy54KjItdykvdztcclxuXHRcdG5vcm1hbFBvc1k9LSgoc3ViUG9zLnkqMi1oKS9oKTtcclxuXHRcdGltYWdlPWNyZWF0ZWJhc2U2NCgpO1xyXG5cdHNlbmRpbmdUaW1lcj1zZXRJbnRlcnZhbChzZW50ZGF0YSwxMDApO1xyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHRzdWJtaXRDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0Ly9zZW50RmxhZz10cnVlO1xyXG5cdFx0c3ViUG9zPWdldFBvc1QoZSxzdWJtaXRDYW52YXMpO1xyXG5cdFx0bm9ybWFsUG9zWD0oc3ViUG9zLngqMi13KS93O1xyXG5cdFx0bm9ybWFsUG9zWT0tKChzdWJQb3MueSoyLWgpL2gpO1xyXG5cdFx0aW1hZ2U9Y3JlYXRlYmFzZTY0KCk7XHJcblx0fSxmYWxzZSk7XHJcblx0c3VibWl0Q2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRzZW50RmxhZz1mYWxzZTtcclxuXHRcdGNvbnNvbGUubG9nKFwidG91Y2hlbmRcIik7XHJcblx0XHRjbGVhckludGVydmFsKHNlbmRpbmdUaW1lcik7XHJcblx0fSxmYWxzZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHNlbnRkYXRhKCl7XHJcblx0XHRjb25zb2xlLmxvZyhcInNlbnRkYXRhX2Z1bmN0aW9uXCIpO1xyXG5cdFx0XHJcblx0XHRzb2NrZXQuZW1pdChcInB1c2hJbWFnZUZyb21DbGllbnRcIix7XHJcblx0XHRcdGltZ2RhdGE6aW1hZ2UsXHJcblx0XHRcdHg6bm9ybWFsUG9zWCxcclxuXHRcdFx0eTpub3JtYWxQb3NZXHJcblx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHR9XHJcblxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZWJhc2U2NCgpe1xyXG5cdHZhciBkYXRhPWNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XHJcblx0dmFyIGltYWdlQ29udGVudHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZUNvbnRlbnRzXCIpO1xyXG5cdGltYWdlQ29udGVudHMuaW5uZXJIVE1MPVwiPGltZyBzcmM9J1wiK2RhdGErXCInPlwiO1x0XHJcblx0cmV0dXJuIGRhdGE7XHJcbn1cclxuLy/jgr/jg4Pjg5fplqLpgKPplqLmlbBcclxuZnVuY3Rpb24gc2Nyb2xsWCgpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O31cclxuZnVuY3Rpb24gc2Nyb2xsWSgpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt9XHJcbmZ1bmN0aW9uIGdldFBvc1QoX2UsX2NhbnZhcyl7XHJcblx0dmFyIG1vdXNlWD1fZS50b3VjaGVzWzBdLmNsaWVudFgtJChfY2FudmFzKS5wb3NpdGlvbigpLmxlZnQrc2Nyb2xsWCgpO1xyXG5cdHZhciBtb3VzZVk9X2UudG91Y2hlc1swXS5jbGllbnRZLSQoX2NhbnZhcykucG9zaXRpb24oKS50b3Arc2Nyb2xsWSgpO1xyXG5cdHJldHVybiB7eDptb3VzZVgseTptb3VzZVl9O1xyXG59XHJcbmZ1bmN0aW9uIHNldEV2ZW50QnV0dG9uQ29sb3IoX2lkLF9jKXtcclxuXHRjb25zb2xlLmxvZyhfaWQpO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9pZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdGNvbnNvbGUubG9nKF9pZCk7XHJcblx0XHRfYy5zdHJva2VTdHlsZT1faWQ7XHJcblx0fSxmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEV2ZW50TGluZVdpZHRoKF9pZCxfYyl7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0Y29uc29sZS5sb2coX2lkK1wiX2NsaWNrXCIpO1xyXG5cdFx0dmFyIHN0cm9rZXdpZHRoO1xyXG5cdFx0c3dpdGNoKF9pZCl7XHJcblx0XHRcdGNhc2UgXCJzbWFsbFwiOlxyXG5cdFx0XHRcdHN0cm9rZXdpZHRoPTU7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgXCJtaWRkbGVcIjpcclxuXHRcdFx0XHRzdHJva2V3aWR0aD0xMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBcImxhcmdlXCI6XHJcblx0XHRcdFx0c3Ryb2tld2lkdGg9MjA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRjb25zb2xlLmxvZyhzdHJva2V3aWR0aCk7XHJcblx0XHRfYy5saW5lV2lkdGg9c3Ryb2tld2lkdGg7XHJcblx0fSxmYWxzZSk7XHJcbn1cclxuXHJcbi8v44OW44Op44Km44K244Gu44OH44OV44Kp44Or44OI5YuV5L2c44KS56aB5q2i44GZ44KLXHJcbmZ1bmN0aW9uIHN0b3BEZWZhdWx0KGUpe1xyXG5cdGlmKGUudG91Y2hlc1swXS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwibGlcIil7XHJcblx0XHQvL2NvbnNvbGUubG9nKGUudG91Y2hlc1swXS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0aWYoZS50b3VjaGVzWzBdLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PVwiZGl2XCIpe1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJpbnB1dFwiKXtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59XHJcbiJdfQ==
