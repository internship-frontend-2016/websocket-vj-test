(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.onload = function () {
	var canvas = document.getElementById("myCanvas");
	var w = 316;
	var h = 316;
	initPaintCanvas(w, h, canvas);
	init();
	initControllerPad(w, h, canvas);
};

//絵を描く部分
function initPaintCanvas(_w, _h, _canvas) {
	var c = _canvas.getContext("2d");
	var drawing = false;
	var oldPos;

	_canvas.width = _w;
	_canvas.height = _h;

	c.strokeStyle = "black";
	c.lineWidth = 5;
	c.lineJoin = "round";
	c.lineCap = "round";

	//タップ開始時に、絵を描く準備をする
	_canvas.addEventListener("touchstart", function (e) {
		drawing = true;
		oldPos = getPosT(e, _canvas);
	}, false);

	//タップ終了時に、絵を描く後処理を行う
	_canvas.addEventListener("touched", function () {
		drawing = false;
	}, false);

	//gestureイベント（2本指以上触ると発生する）
	//終了時にも絵を描く後処理を行う
	_canvas.addEventListener("gestureend", function () {
		drawing = false;
	}, false);

	//実際に絵を書く処理
	//前回保存した位置から現在の位置に線を引く
	_canvas.addEventListener("touchmove", function (e) {
		var pos = getPosT(e, _canvas);
		if (drawing) {
			c.beginPath();
			c.moveTo(oldPos.x, oldPos.y);
			c.lineTo(pos.x, pos.y);
			c.stroke();
			c.closePath();
			oldPos = pos;
		}
	}, false);
	//色と線の太さを設定する
	setEventButtonColor("black", c);
	setEventButtonColor("blue", c);
	setEventButtonColor("red", c);
	setEventButtonColor("green", c);

	setEventLineWidth("small", c);
	setEventLineWidth("middle", c);
	setEventLineWidth("large", c);

	//削除ボタン
	document.getElementById("delete_button").addEventListener("click", function () {
		c.clearRect(0, 0, $(_canvas).width(), $(_canvas).height());
	}, false);
}
//禁止事項など
function init() {
	//ドキュメントのタッチイベントの初期化
	document.addEventListener("touchstart", stopDefault, false);
	document.addEventListener("touchmove", stopDefault, false);
	//document.addEventListener("touchend",stopDefault,false);
	//ドキュメントのジェスチャーイベントの初期化
	document.addEventListener("gesturestart", stopDefault, false);
	document.addEventListener("gesturechange", stopDefault, false);
	//document.addEventListener("gestureend",stopDefault,false);	
}
//送信ボタン
function initControllerPad(_w, _h, _canvas) {
	var socket = io();
	var submitCanvas = document.getElementById("submitCanvas");
	var subc = submitCanvas.getContext("2d");

	//送信する側のキャンバス
	submitCanvas.width = _w;
	submitCanvas.height = _h;
	//画像をサーバーに送信する処理
	var subPos;
	var normalPosX, normalPosY;
	var image;
	var sendingTimer;
	/*-------------画像を送信する--------------*/

	submitCanvas.addEventListener("touchstart", function (e) {
		subPos = getPosT(e, submitCanvas);
		normalPosX = (subPos.x * 2 - _w) / _w;
		normalPosY = -((subPos.y * 2 - _h) / _h);
		image = createbase64(_canvas);
		sendingTimer = setInterval(sentdata, 100);
	}, false);

	submitCanvas.addEventListener("touchmove", function (e) {
		subPos = getPosT(e, submitCanvas);
		normalPosX = (subPos.x * 2 - _w) / _w;
		normalPosY = -((subPos.y * 2 - _h) / _h);
		image = createbase64(_canvas);
	}, false);
	submitCanvas.addEventListener("touchend", function () {
		clearInterval(sendingTimer);
	}, false);

	function sentdata() {
		socket.emit("pushImageFromClient", {
			imgdata: image,
			x: normalPosX,
			y: normalPosY
		});
	}
}
function createbase64(_canvas) {
	var data = _canvas.toDataURL("image/png");
	var imageContents = document.getElementById("imageContents");
	imageContents.innerHTML = "<img src='" + data + "'>";
	return data;
}
//タップ関連関数
function scrollX() {
	return document.documentElement.scrollLeft || document.body.scrollLeft;
}
function scrollY() {
	return document.documentElement.scrollTop || document.body.scrollTop;
}
function getPosT(_e, _canvas) {
	var mouseX = _e.touches[0].clientX - $(_canvas).position().left + scrollX();
	var mouseY = _e.touches[0].clientY - $(_canvas).position().top + scrollY();
	return { x: mouseX, y: mouseY };
}
function setEventButtonColor(_id, _c) {
	document.getElementById(_id).addEventListener("click", function () {
		_c.strokeStyle = _id;
	}, false);
}

function setEventLineWidth(_id, _c) {
	document.getElementById(_id).addEventListener("click", function () {
		var strokewidth;
		switch (_id) {
			case "small":
				strokewidth = 5;
				break;
			case "middle":
				strokewidth = 10;
				break;
			case "large":
				strokewidth = 20;
				break;
			default:
				break;
		}
		_c.lineWidth = strokewidth;
	}, false);
}

//ブラウザのデフォルト動作を禁止する
function stopDefault(e) {
	if (e.touches[0].target.tagName.toLowerCase() == "li") {
		return;
	}
	if (e.touches[0].target.tagName.toLowerCase() == "div") {
		return;
	}
	if (e.touches[0].target.tagName.toLowerCase() == "input") {
		return;
	}
	e.preventDefault();
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFx2ai1jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNDQSxPQUFPLE1BQVAsR0FBYyxZQUFVO0FBQ3ZCLEtBQUksU0FBTyxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBWDtBQUNBLEtBQUksSUFBRSxHQUFOO0FBQ0EsS0FBSSxJQUFFLEdBQU47QUFDQSxpQkFBZ0IsQ0FBaEIsRUFBa0IsQ0FBbEIsRUFBb0IsTUFBcEI7QUFDQTtBQUNBLG1CQUFrQixDQUFsQixFQUFvQixDQUFwQixFQUFzQixNQUF0QjtBQUNBLENBUEQ7O0FBU0E7QUFDQSxTQUFTLGVBQVQsQ0FBeUIsRUFBekIsRUFBNEIsRUFBNUIsRUFBK0IsT0FBL0IsRUFBdUM7QUFDdEMsS0FBSSxJQUFFLFFBQVEsVUFBUixDQUFtQixJQUFuQixDQUFOO0FBQ0EsS0FBSSxVQUFRLEtBQVo7QUFDQSxLQUFJLE1BQUo7O0FBRUEsU0FBUSxLQUFSLEdBQWMsRUFBZDtBQUNBLFNBQVEsTUFBUixHQUFlLEVBQWY7O0FBRUEsR0FBRSxXQUFGLEdBQWMsT0FBZDtBQUNBLEdBQUUsU0FBRixHQUFZLENBQVo7QUFDQSxHQUFFLFFBQUYsR0FBVyxPQUFYO0FBQ0EsR0FBRSxPQUFGLEdBQVUsT0FBVjs7QUFFQTtBQUNBLFNBQVEsZ0JBQVIsQ0FBeUIsWUFBekIsRUFBc0MsVUFBUyxDQUFULEVBQVc7QUFDaEQsWUFBUSxJQUFSO0FBQ0EsV0FBTyxRQUFRLENBQVIsRUFBVSxPQUFWLENBQVA7QUFDQSxFQUhELEVBR0UsS0FIRjs7QUFLQTtBQUNBLFNBQVEsZ0JBQVIsQ0FBeUIsU0FBekIsRUFBbUMsWUFBVTtBQUM1QyxZQUFRLEtBQVI7QUFDQSxFQUZELEVBRUUsS0FGRjs7QUFJQTtBQUNBO0FBQ0EsU0FBUSxnQkFBUixDQUF5QixZQUF6QixFQUFzQyxZ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dCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcclxud2luZG93Lm9ubG9hZD1mdW5jdGlvbigpe1xyXG5cdHZhciBjYW52YXM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUNhbnZhc1wiKTtcclxuXHR2YXIgdz0zMTY7XHJcblx0dmFyIGg9MzE2O1xyXG5cdGluaXRQYWludENhbnZhcyh3LGgsY2FudmFzKTtcclxuXHRpbml0KCk7XHJcblx0aW5pdENvbnRyb2xsZXJQYWQodyxoLGNhbnZhcylcclxufVxyXG5cclxuLy/ntbXjgpLmj4/jgY/pg6jliIZcclxuZnVuY3Rpb24gaW5pdFBhaW50Q2FudmFzKF93LF9oLF9jYW52YXMpe1xyXG5cdHZhciBjPV9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cdHZhciBkcmF3aW5nPWZhbHNlO1xyXG5cdHZhciBvbGRQb3M7XHJcblxyXG5cdF9jYW52YXMud2lkdGg9X3c7XHJcblx0X2NhbnZhcy5oZWlnaHQ9X2g7XHJcblxyXG5cdGMuc3Ryb2tlU3R5bGU9XCJibGFja1wiO1xyXG5cdGMubGluZVdpZHRoPTU7XHJcblx0Yy5saW5lSm9pbj1cInJvdW5kXCI7XHJcblx0Yy5saW5lQ2FwPVwicm91bmRcIjtcclxuXHJcblx0Ly/jgr/jg4Pjg5fplovlp4vmmYLjgavjgIHntbXjgpLmj4/jgY/mupblgpnjgpLjgZnjgotcclxuXHRfY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oZSl7XHJcblx0XHRkcmF3aW5nPXRydWU7XHJcblx0XHRvbGRQb3M9Z2V0UG9zVChlLF9jYW52YXMpO1xyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL+OCv+ODg+ODl+e1guS6huaZguOBq+OAgee1teOCkuaPj+OBj+W+jOWHpueQhuOCkuihjOOBhlxyXG5cdF9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZWRcIixmdW5jdGlvbigpe1xyXG5cdFx0ZHJhd2luZz1mYWxzZVxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL2dlc3R1cmXjgqTjg5njg7Pjg4jvvIgy5pys5oyH5Lul5LiK6Kem44KL44Go55m655Sf44GZ44KL77yJXHJcblx0Ly/ntYLkuobmmYLjgavjgoLntbXjgpLmj4/jgY/lvozlh6bnkIbjgpLooYzjgYZcclxuXHRfY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlZW5kXCIsZnVuY3Rpb24oKXtcclxuXHRcdGRyYXdpbmc9ZmFsc2U7XHJcblx0fSxmYWxzZSk7XHJcblxyXG5cdC8v5a6f6Zqb44Gr57W144KS5pu444GP5Yem55CGXHJcblx0Ly/liY3lm57kv53lrZjjgZfjgZ/kvY3nva7jgYvjgonnj77lnKjjga7kvY3nva7jgavnt5rjgpLlvJXjgY9cclxuXHRfY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixmdW5jdGlvbihlKXtcclxuXHR2YXIgcG9zID0gZ2V0UG9zVChlLF9jYW52YXMpO1xyXG5cdFx0aWYoZHJhd2luZyl7XHJcblx0XHRcdGMuYmVnaW5QYXRoKCk7XHJcblx0XHRcdGMubW92ZVRvKG9sZFBvcy54LG9sZFBvcy55KTtcclxuXHRcdFx0Yy5saW5lVG8ocG9zLngscG9zLnkpO1xyXG5cdFx0XHRjLnN0cm9rZSgpO1xyXG5cdFx0XHRjLmNsb3NlUGF0aCgpO1xyXG5cdFx0XHRvbGRQb3M9cG9zO1xyXG5cdFx0fVxyXG5cdH0sZmFsc2UpO1xyXG5cdC8v6Imy44Go57ea44Gu5aSq44GV44KS6Kit5a6a44GZ44KLXHJcblx0c2V0RXZlbnRCdXR0b25Db2xvcihcImJsYWNrXCIsYyk7XHJcblx0c2V0RXZlbnRCdXR0b25Db2xvcihcImJsdWVcIixjKTtcclxuXHRzZXRFdmVudEJ1dHRvbkNvbG9yKFwicmVkXCIsYyk7XHJcblx0c2V0RXZlbnRCdXR0b25Db2xvcihcImdyZWVuXCIsYyk7XHJcblxyXG5cdHNldEV2ZW50TGluZVdpZHRoKFwic21hbGxcIixjKTtcclxuXHRzZXRFdmVudExpbmVXaWR0aChcIm1pZGRsZVwiLGMpO1xyXG5cdHNldEV2ZW50TGluZVdpZHRoKFwibGFyZ2VcIixjKTtcclxuXHJcblx0Ly/liYrpmaTjg5zjgr/jg7NcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZV9idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdGMuY2xlYXJSZWN0KDAsMCwkKF9jYW52YXMpLndpZHRoKCksJChfY2FudmFzKS5oZWlnaHQoKSk7XHRcdFxyXG5cdH0sZmFsc2UpO1xyXG5cclxufVxyXG4vL+emgeatouS6i+mgheOBquOBqVxyXG5mdW5jdGlvbiBpbml0KCl7XHJcblx0Ly/jg4njgq3jg6Xjg6Hjg7Pjg4jjga7jgr/jg4Pjg4HjgqTjg5njg7Pjg4jjga7liJ3mnJ/ljJZcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdC8v44OJ44Kt44Ol44Oh44Oz44OI44Gu44K444Kn44K544OB44Oj44O844Kk44OZ44Oz44OI44Gu5Yid5pyf5YyWXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVzdGFydFwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWNoYW5nZVwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHQvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlZW5kXCIsc3RvcERlZmF1bHQsZmFsc2UpO1x0XHJcbn1cclxuLy/pgIHkv6Hjg5zjgr/jg7NcclxuZnVuY3Rpb24gaW5pdENvbnRyb2xsZXJQYWQoX3csX2gsX2NhbnZhcyl7XHJcblx0dmFyIHNvY2tldD1pbygpO1xyXG5cdHZhciBzdWJtaXRDYW52YXM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRDYW52YXNcIik7XHJcblx0dmFyIHN1YmM9c3VibWl0Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcblx0Ly/pgIHkv6HjgZnjgovlgbTjga7jgq3jg6Pjg7Pjg5DjgrlcclxuXHRzdWJtaXRDYW52YXMud2lkdGg9X3c7XHJcblx0c3VibWl0Q2FudmFzLmhlaWdodD1faDtcclxuXHQvL+eUu+WDj+OCkuOCteODvOODkOODvOOBq+mAgeS/oeOBmeOCi+WHpueQhlxyXG5cdHZhciBzdWJQb3M7XHJcblx0dmFyIG5vcm1hbFBvc1gsbm9ybWFsUG9zWTtcclxuXHR2YXIgaW1hZ2U7XHJcblx0dmFyIHNlbmRpbmdUaW1lcjtcclxuXHQvKi0tLS0tLS0tLS0tLS3nlLvlg4/jgpLpgIHkv6HjgZnjgostLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cdHN1Ym1pdENhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0c3ViUG9zPWdldFBvc1QoZSxzdWJtaXRDYW52YXMpO1xyXG5cdFx0bm9ybWFsUG9zWD0oc3ViUG9zLngqMi1fdykvX3c7XHJcblx0XHRub3JtYWxQb3NZPS0oKHN1YlBvcy55KjItX2gpL19oKTtcclxuXHRcdGltYWdlPWNyZWF0ZWJhc2U2NChfY2FudmFzKTtcclxuXHRcdHNlbmRpbmdUaW1lcj1zZXRJbnRlcnZhbChzZW50ZGF0YSwxMDApO1xyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHRzdWJtaXRDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0c3ViUG9zPWdldFBvc1QoZSxzdWJtaXRDYW52YXMpO1xyXG5cdFx0bm9ybWFsUG9zWD0oc3ViUG9zLngqMi1fdykvX3c7XHJcblx0XHRub3JtYWxQb3NZPS0oKHN1YlBvcy55KjItX2gpL19oKTtcclxuXHRcdGltYWdlPWNyZWF0ZWJhc2U2NChfY2FudmFzKTtcclxuXHR9LGZhbHNlKTtcclxuXHRzdWJtaXRDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXtcclxuXHRcdGNsZWFySW50ZXJ2YWwoc2VuZGluZ1RpbWVyKTtcclxuXHR9LGZhbHNlKTtcclxuXHJcblx0ZnVuY3Rpb24gc2VudGRhdGEoKXtcdFx0XHJcblx0XHRzb2NrZXQuZW1pdChcInB1c2hJbWFnZUZyb21DbGllbnRcIix7XHJcblx0XHRcdGltZ2RhdGE6aW1hZ2UsXHJcblx0XHRcdHg6bm9ybWFsUG9zWCxcclxuXHRcdFx0eTpub3JtYWxQb3NZXHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlYmFzZTY0KF9jYW52YXMpe1xyXG5cdHZhciBkYXRhPV9jYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG5cdHZhciBpbWFnZUNvbnRlbnRzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VDb250ZW50c1wiKTtcclxuXHRpbWFnZUNvbnRlbnRzLmlubmVySFRNTD1cIjxpbWcgc3JjPSdcIitkYXRhK1wiJz5cIjtcdFxyXG5cdHJldHVybiBkYXRhO1xyXG59XHJcbi8v44K/44OD44OX6Zai6YCj6Zai5pWwXHJcbmZ1bmN0aW9uIHNjcm9sbFgoKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDt9XHJcbmZ1bmN0aW9uIHNjcm9sbFkoKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7fVxyXG5mdW5jdGlvbiBnZXRQb3NUKF9lLF9jYW52YXMpe1xyXG5cdHZhciBtb3VzZVg9X2UudG91Y2hlc1swXS5jbGllbnRYLSQoX2NhbnZhcykucG9zaXRpb24oKS5sZWZ0K3Njcm9sbFgoKTtcclxuXHR2YXIgbW91c2VZPV9lLnRvdWNoZXNbMF0uY2xpZW50WS0kKF9jYW52YXMpLnBvc2l0aW9uKCkudG9wK3Njcm9sbFkoKTtcclxuXHRyZXR1cm4ge3g6bW91c2VYLHk6bW91c2VZfTtcclxufVxyXG5mdW5jdGlvbiBzZXRFdmVudEJ1dHRvbkNvbG9yKF9pZCxfYyl7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0X2Muc3Ryb2tlU3R5bGU9X2lkO1xyXG5cdH0sZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRFdmVudExpbmVXaWR0aChfaWQsX2Mpe1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9pZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdHZhciBzdHJva2V3aWR0aDtcclxuXHRcdHN3aXRjaChfaWQpe1xyXG5cdFx0XHRjYXNlIFwic21hbGxcIjpcclxuXHRcdFx0XHRzdHJva2V3aWR0aD01O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFwibWlkZGxlXCI6XHJcblx0XHRcdFx0c3Ryb2tld2lkdGg9MTA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgXCJsYXJnZVwiOlxyXG5cdFx0XHRcdHN0cm9rZXdpZHRoPTIwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0X2MubGluZVdpZHRoPXN0cm9rZXdpZHRoO1xyXG5cdH0sZmFsc2UpO1xyXG59XHJcblxyXG4vL+ODluODqeOCpuOCtuOBruODh+ODleOCqeODq+ODiOWLleS9nOOCkuemgeatouOBmeOCi1xyXG5mdW5jdGlvbiBzdG9wRGVmYXVsdChlKXtcclxuXHRpZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSBcImxpXCIpe1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJkaXZcIil7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmKGUudG91Y2hlc1swXS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1cImlucHV0XCIpe1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbn1cclxuIl19
