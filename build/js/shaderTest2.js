(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var c, cw, ch, mx, my, gl, run, eCheck;
var startTime;
var time = 0.0;
var tempTime = 0.0;
var fps = 1000 / 30;
var count = 0;
var tUniLocation = [];
var tvAttLocation;
var tvPosition;
var tvIndex;
var tprg;

var attStride = [];
var attLocation = [];
var uniLocation = [];
var VBOList;
var iIndex;
var fBuffer;
var prg;

// 各種行列の生成と初期化
var m = new matIV();
var mMatrix = m.identity(m.create());
var vMatrix = m.identity(m.create());
var pMatrix = m.identity(m.create());
var tmpMatrix = m.identity(m.create());
var mvpMatrix = m.identity(m.create());

window.onload = function () {
    c = document.getElementById("canvas");
    // cw=512;
    // ch=512;
    cw = 500;
    ch = 300;
    c.width = cw;
    c.height = ch;

    eCheck = document.getElementById("check");

    c.addEventListener("mousemove", mouseMove, true);
    eCheck.addEventListener("change", checkChange, true);

    gl = c.getContext("webgl") || c.getContext("experimental-webgl");

    /*---------------shader背景側---------------------*/
    tprg = create_program(gl, create_shader(gl, "tvs"), create_shader(gl, "tfs"));
    run = tprg !== null;
    if (!run) {
        eCheck.checked = false;
    }
    tUniLocation[0] = gl.getUniformLocation(tprg, "time");
    tUniLocation[1] = gl.getUniformLocation(tprg, "mouse");
    tUniLocation[2] = gl.getUniformLocation(tprg, "iResolution");

    var tPosition = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, -1.0, 0.0];
    var tIndex = [0, 2, 1, 1, 2, 3];
    tvPosition = create_vbo(gl, tPosition);
    tvIndex = create_ibo(gl, tIndex);
    tvAttLocation = gl.getAttribLocation(tprg, "position");

    //    gl.bindBuffer(gl.ARRAY_BUFFER,tvPosition);
    // gl.enableVertexAttribArray(tvAttLocation);
    // gl.vertexAttribPointer(tvAttLocation,3,gl.FLOAT,false,0,0);
    // gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,tvIndex);

    /*------------shaderをテクスチャに貼り付ける--------------*/
    var v_shader = create_shader(gl, 'vs');
    var f_shader = create_shader(gl, 'fs');

    // プログラムオブジェクトの生成とリンク
    prg = create_program(gl, v_shader, f_shader);

    // attributeLocationを配列に取得

    attLocation[0] = gl.getAttribLocation(prg, 'position');
    attLocation[1] = gl.getAttribLocation(prg, 'color');
    attLocation[2] = gl.getAttribLocation(prg, 'textureCoord');

    // attributeの要素数を配列に格納
    attStride[0] = 3;
    attStride[1] = 4;
    attStride[2] = 2;

    // 頂点の位置
    var position = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, -1.0, 0.0];

    // 頂点色
    var color = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];

    // テクスチャ座標
    var textureCoord = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0];

    // 頂点インデックス
    var index = [0, 1, 2, 3, 2, 1];

    // VBOとIBOの生成
    var vPosition = create_vbo(gl, position);
    var vColor = create_vbo(gl, color);
    var vTextureCoord = create_vbo(gl, textureCoord);
    VBOList = [vPosition, vColor, vTextureCoord];
    iIndex = create_ibo(gl, index);

    // uniformLocationを配列に取得
    uniLocation[0] = gl.getUniformLocation(prg, 'mvpMatrix');
    uniLocation[1] = gl.getUniformLocation(prg, 'texture');

    // // 各種行列の生成と初期化
    // var m = new matIV();
    // var mMatrix   = m.identity(m.create());
    // var vMatrix   = m.identity(m.create());
    // var pMatrix   = m.identity(m.create());
    // var tmpMatrix = m.identity(m.create());
    // var mvpMatrix = m.identity(m.create());

    // ビュー×プロジェクション座標変換行列
    m.lookAt([0.0, 0.0, 5.0], [0, 0, 0], [0, 1, 0], vMatrix);
    m.perspective(45, c.width / c.height, 0.1, 100, pMatrix);
    m.multiply(pMatrix, vMatrix, tmpMatrix);

    // 深度テストを有効にする
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LEQUAL);

    gl.activeTexture(gl.TEXTURE0);

    // フレームバッファオブジェクトの取得
    var fBufferWidth = 512;
    var fBufferHeight = 512;
    fBuffer = create_framebuffer(gl, fBufferWidth, fBufferHeight);
    /*------------------------------------------------------*/

    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    mx = 0.5;my = 0.5;
    startTime = new Date().getTime();

    render();
};
function render() {
    if (!run) {
        return;
    }
    time = (new Date().getTime() - startTime) * 0.001;
    count++;
    var rad = count % 360 * Math.PI / 180;

    /*--フレームバッファをバインド--*/
    gl.bindFramebuffer(gl.FRAMEBUFFER, fBuffer.f);
    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    //    gl.clearDepth(1.0);
    //    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);
    gl.clear(gl.COLOR_BUFFER_BIT);

    gl.useProgram(tprg);
    //attributeの登録
    gl.bindBuffer(gl.ARRAY_BUFFER, tvPosition);
    gl.enableVertexAttribArray(tvAttLocation);
    gl.vertexAttribPointer(tvAttLocation, 3, gl.FLOAT, false, 0, 0);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, tvIndex);

    //	console.log(time+tempTime);
    gl.uniform1f(tUniLocation[0], time + tempTime);
    gl.uniform2fv(tUniLocation[1], [mx, my]);
    gl.uniform2fv(tUniLocation[2], [cw, ch]);
    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
    //	gl.flush();
    gl.bindFramebuffer(gl.FRAMEBUFFER, null);

    /*--shader背景を板ポリに写す--*/
    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.clearDepth(1.0);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    gl.useProgram(prg);
    // VBOとIBOの登録
    set_attribute(gl, VBOList, attLocation, attStride);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, iIndex);

    m.identity(mMatrix);
    m.rotate(mMatrix, rad, [0, 1, 0], mMatrix);
    m.multiply(tmpMatrix, mMatrix, mvpMatrix);
    //登録
    gl.bindTexture(gl.TEXTURE_2D, fBuffer.t);
    gl.uniform1i(uniLocation[1], 0);
    gl.uniformMatrix4fv(uniLocation[0], false, mvpMatrix);
    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);

    gl.flush();

    setTimeout(render, fps);
}
function checkChange(e) {
    run = e.currentTarget.checked;
    if (run) {
        startTime = new Date().getTime();
        render();
    } else {
        console.log("time" + time);
        console.log("tempTime" + tempTime);
        tempTime += time;
    }
}
function mouseMove(e) {
    mx = e.offsetX / cw;
    my = e.offsetY / ch;
}
// シェーダを生成する関数
function create_shader(_gl, _id) {
    // シェーダを格納する変数
    var shader;

    // HTMLからscriptタグへの参照を取得
    var scriptElement = document.getElementById(_id);

    // scriptタグが存在しない場合は抜ける
    if (!scriptElement) {
        return;
    }

    // scriptタグのtype属性をチェック
    switch (scriptElement.type) {

        // 頂点シェーダの場合
        case 'x-shader/x-vertex':
            shader = _gl.createShader(_gl.VERTEX_SHADER);
            break;

        // フラグメントシェーダの場合
        case 'x-shader/x-fragment':
            shader = _gl.createShader(_gl.FRAGMENT_SHADER);
            break;
        default:
            return;
    }

    // 生成されたシェーダにソースを割り当てる
    _gl.shaderSource(shader, scriptElement.text);

    // シェーダをコンパイルする
    _gl.compileShader(shader);

    // シェーダが正しくコンパイルされたかチェック
    if (_gl.getShaderParameter(shader, _gl.COMPILE_STATUS)) {

        // 成功していたらシェーダを返して終了
        return shader;
    } else {

        // 失敗していたらエラーログをアラートする
        alert(_gl.getShaderInfoLog(shader));
    }
}
// プログラムオブジェクトを生成しシェーダをリンクする関数
function create_program(_gl, _vs, _fs) {
    // プログラムオブジェクトの生成
    var program = _gl.createProgram();

    // プログラムオブジェクトにシェーダを割り当てる
    _gl.attachShader(program, _vs);
    _gl.attachShader(program, _fs);

    // シェーダをリンク
    _gl.linkProgram(program);

    // シェーダのリンクが正しく行なわれたかチェック
    if (_gl.getProgramParameter(program, _gl.LINK_STATUS)) {

        // 成功していたらプログラムオブジェクトを有効にする
        _gl.useProgram(program);

        // プログラムオブジェクトを返して終了
        return program;
    } else {

        // 失敗していたらエラーログをアラートする
        alert(_gl.getProgramInfoLog(program));
    }
}
// VBOを生成する関数
function create_vbo(_gl, _data) {
    // バッファオブジェクトの生成
    var vbo = _gl.createBuffer();

    // バッファをバインドする
    _gl.bindBuffer(_gl.ARRAY_BUFFER, vbo);

    // バッファにデータをセット
    _gl.bufferData(_gl.ARRAY_BUFFER, new Float32Array(_data), _gl.STATIC_DRAW);

    // バッファのバインドを無効化
    _gl.bindBuffer(_gl.ARRAY_BUFFER, null);

    // 生成した VBO を返して終了
    return vbo;
}
// IBOを生成する関数
function create_ibo(_gl, _data) {
    // バッファオブジェクトの生成
    var ibo = _gl.createBuffer();

    // バッファをバインドする
    _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, ibo);

    // バッファにデータをセット
    _gl.bufferData(_gl.ELEMENT_ARRAY_BUFFER, new Int16Array(_data), _gl.STATIC_DRAW);

    // バッファのバインドを無効化
    _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, null);

    // 生成したIBOを返して終了
    return ibo;
}
function set_attribute(_gl, _vbo, _attL, _attS) {
    // 引数として受け取った配列を処理する
    for (var i in _vbo) {
        // バッファをバインドする
        _gl.bindBuffer(_gl.ARRAY_BUFFER, _vbo[i]);

        // attributeLocationを有効にする
        _gl.enableVertexAttribArray(_attL[i]);

        // attributeLocationを通知し登録する
        _gl.vertexAttribPointer(_attL[i], _attS[i], _gl.FLOAT, false, 0, 0);
    }
}
// フレームバッファをオブジェクトとして生成する関数
function create_framebuffer(_gl, _width, _height) {
    // フレームバッファの生成
    var frameBuffer = _gl.createFramebuffer();

    // フレームバッファをWebGLにバインド
    _gl.bindFramebuffer(_gl.FRAMEBUFFER, frameBuffer);

    // 深度バッファ用レンダーバッファの生成とバインド
    var depthRenderBuffer = _gl.createRenderbuffer();
    _gl.bindRenderbuffer(_gl.RENDERBUFFER, depthRenderBuffer);

    // レンダーバッファを深度バッファとして設定
    _gl.renderbufferStorage(_gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, _width, _height);

    // フレームバッファにレンダーバッファを関連付ける
    _gl.framebufferRenderbuffer(_gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, depthRenderBuffer);

    // フレームバッファ用テクスチャの生成
    var fTexture = _gl.createTexture();

    // フレームバッファ用のテクスチャをバインド
    _gl.bindTexture(_gl.TEXTURE_2D, fTexture);

    // フレームバッファ用のテクスチャにカラー用のメモリ領域を確保
    _gl.texImage2D(_gl.TEXTURE_2D, 0, _gl.RGBA, _width, _height, 0, _gl.RGBA, _gl.UNSIGNED_BYTE, null);

    // テクスチャパラメータ
    _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MAG_FILTER, _gl.LINEAR);
    _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MIN_FILTER, _gl.LINEAR);
    _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE);
    _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE);

    // フレームバッファにテクスチャを関連付ける
    _gl.framebufferTexture2D(_gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D, fTexture, 0);

    // 各種オブジェクトのバインドを解除
    _gl.bindTexture(_gl.TEXTURE_2D, null);
    _gl.bindRenderbuffer(_gl.RENDERBUFFER, null);
    _gl.bindFramebuffer(_gl.FRAMEBUFFER, null);

    // オブジェクトを返して終了
    return { f: frameBuffer, d: depthRenderBuffer, t: fTexture };
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzaGFkZXJUZXN0Mi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQUNBLElBQUksQ0FBSixFQUFNLEVBQU4sRUFBUyxFQUFULEVBQVksRUFBWixFQUFlLEVBQWYsRUFBa0IsRUFBbEIsRUFBcUIsR0FBckIsRUFBeUIsTUFBekI7QUFDQSxJQUFJLFNBQUo7QUFDQSxJQUFJLE9BQUssR0FBVDtBQUNBLElBQUksV0FBUyxHQUFiO0FBQ0EsSUFBSSxNQUFJLE9BQUssRUFBYjtBQUNBLElBQUksUUFBTSxDQUFWO0FBQ0EsSUFBSSxlQUFhLEVBQWpCO0FBQ0EsSUFBSSxhQUFKO0FBQ0EsSUFBSSxVQUFKO0FBQ0EsSUFBSSxPQUFKO0FBQ0EsSUFBSSxJQUFKOztBQUVBLElBQUksWUFBWSxFQUFoQjtBQUNBLElBQUksY0FBYSxFQUFqQjtBQUNBLElBQUksY0FBYyxFQUFsQjtBQUNBLElBQUksT0FBSjtBQUNBLElBQUksTUFBSjtBQUNBLElBQUksT0FBSjtBQUNBLElBQUksR0FBSjs7QUFHQTtBQUNBLElBQUksSUFBSSxJQUFJLEtBQUosRUFBUjtBQUNBLElBQUksVUFBWSxFQUFFLFFBQUYsQ0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFoQjtBQUNBLElBQUksVUFBWSxFQUFFLFFBQUYsQ0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFoQjtBQUNBLElBQUksVUFBWSxFQUFFLFFBQUYsQ0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFoQjtBQUNBLElBQUksWUFBWSxFQUFFLFFBQUYsQ0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFoQjtBQUNBLElBQUksWUFBWSxFQUFFLFFBQUYsQ0FBVyxFQUFFLE1BQUYsRUFBWCxDQUFoQjs7QUFFQSxPQUFPLE1BQVAsR0FBYyxZQUFVO0FBQ3ZCLFFBQUUsU0FBUyxjQUFULENBQXdCLFFBQXhCLENBQUY7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R0FBSSxpQkFBdEIsRUFBeUMsR0FBSSxRQUE3QyxFQUFQO0FBQ0giLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBjLGN3LGNoLG14LG15LGdsLHJ1bixlQ2hlY2s7XHJcbnZhciBzdGFydFRpbWU7XHJcbnZhciB0aW1lPTAuMDtcclxudmFyIHRlbXBUaW1lPTAuMDtcclxudmFyIGZwcz0xMDAwLzMwO1xyXG52YXIgY291bnQ9MDtcclxudmFyIHRVbmlMb2NhdGlvbj1bXTtcclxudmFyIHR2QXR0TG9jYXRpb247XHJcbnZhciB0dlBvc2l0aW9uO1xyXG52YXIgdHZJbmRleDtcclxudmFyIHRwcmc7XHJcblxyXG52YXIgYXR0U3RyaWRlID0gW107XHJcbnZhciBhdHRMb2NhdGlvbiA9W107XHJcbnZhciB1bmlMb2NhdGlvbiA9IFtdO1xyXG52YXIgVkJPTGlzdDtcclxudmFyIGlJbmRleDtcclxudmFyIGZCdWZmZXI7XHJcbnZhciBwcmc7XHJcblxyXG5cclxuLy8g5ZCE56iu6KGM5YiX44Gu55Sf5oiQ44Go5Yid5pyf5YyWXHJcbnZhciBtID0gbmV3IG1hdElWKCk7XHJcbnZhciBtTWF0cml4ICAgPSBtLmlkZW50aXR5KG0uY3JlYXRlKCkpO1xyXG52YXIgdk1hdHJpeCAgID0gbS5pZGVudGl0eShtLmNyZWF0ZSgpKTtcclxudmFyIHBNYXRyaXggICA9IG0uaWRlbnRpdHkobS5jcmVhdGUoKSk7XHJcbnZhciB0bXBNYXRyaXggPSBtLmlkZW50aXR5KG0uY3JlYXRlKCkpO1xyXG52YXIgbXZwTWF0cml4ID0gbS5pZGVudGl0eShtLmNyZWF0ZSgpKTtcclxuXHJcbndpbmRvdy5vbmxvYWQ9ZnVuY3Rpb24oKXtcclxuXHRjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xyXG5cdC8vIGN3PTUxMjtcclxuXHQvLyBjaD01MTI7XHJcbiAgICBjdz01MDA7XHJcbiAgICBjaD0zMDA7XHJcblx0Yy53aWR0aD1jdztcclxuXHRjLmhlaWdodD1jaDtcclxuXHJcblx0ZUNoZWNrPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hlY2tcIik7XHJcblxyXG5cdGMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLG1vdXNlTW92ZSx0cnVlKTtcclxuXHRlQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLGNoZWNrQ2hhbmdlLHRydWUpO1xyXG5cclxuXHRnbD1jLmdldENvbnRleHQoXCJ3ZWJnbFwiKXx8Yy5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIpO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS1zaGFkZXLog4zmma/lgbQtLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdHRwcmc9Y3JlYXRlX3Byb2dyYW0oZ2wsY3JlYXRlX3NoYWRlcihnbCxcInR2c1wiKSxjcmVhdGVfc2hhZGVyKGdsLFwidGZzXCIpKTtcclxuXHRydW49KHRwcmchPT1udWxsKTtcclxuXHRpZighcnVuKXtcclxuXHRcdGVDaGVjay5jaGVja2VkPWZhbHNlO1xyXG5cdH1cclxuXHR0VW5pTG9jYXRpb25bMF09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRwcmcsXCJ0aW1lXCIpO1xyXG5cdHRVbmlMb2NhdGlvblsxXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24odHByZyxcIm1vdXNlXCIpO1xyXG5cdHRVbmlMb2NhdGlvblsyXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24odHByZyxcImlSZXNvbHV0aW9uXCIpO1xyXG5cclxuXHR2YXIgdFBvc2l0aW9uPVtcclxuXHQtMS4wLDEuMCwwLjAsXHJcblx0MS4wLDEuMCwwLjAsXHJcblx0LTEuMCwtMS4wLDAuMCxcclxuXHQxLjAsLTEuMCwwLjAsXHJcblx0XTtcclxuXHR2YXIgdEluZGV4PVtcclxuXHQwLDIsMSxcclxuXHQxLDIsM1xyXG5cdF07XHJcblx0dHZQb3NpdGlvbj1jcmVhdGVfdmJvKGdsLHRQb3NpdGlvbik7XHJcblx0dHZJbmRleD1jcmVhdGVfaWJvKGdsLHRJbmRleCk7XHJcblx0dHZBdHRMb2NhdGlvbj1nbC5nZXRBdHRyaWJMb2NhdGlvbih0cHJnLFwicG9zaXRpb25cIik7XHJcblx0XHJcbiAvLyAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUix0dlBvc2l0aW9uKTtcclxuXHQvLyBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0dkF0dExvY2F0aW9uKTtcclxuXHQvLyBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHR2QXR0TG9jYXRpb24sMyxnbC5GTE9BVCxmYWxzZSwwLDApO1xyXG5cdC8vIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdHZJbmRleCk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLXNoYWRlcuOCkuODhuOCr+OCueODgeODo+OBq+iyvOOCiuS7mOOBkeOCiy0tLS0tLS0tLS0tLS0tKi9cclxuICAgIHZhciB2X3NoYWRlciA9IGNyZWF0ZV9zaGFkZXIoZ2wsJ3ZzJyk7XHJcbiAgICB2YXIgZl9zaGFkZXIgPSBjcmVhdGVfc2hhZGVyKGdsLCdmcycpO1xyXG4gICAgXHJcbiAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJDjgajjg6rjg7Pjgq9cclxuICAgIHByZyA9IGNyZWF0ZV9wcm9ncmFtKGdsLHZfc2hhZGVyLCBmX3NoYWRlcik7XHJcbiAgICBcclxuICAgIC8vIGF0dHJpYnV0ZUxvY2F0aW9u44KS6YWN5YiX44Gr5Y+W5b6XXHJcbiAgICBcclxuICAgIGF0dExvY2F0aW9uWzBdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAncG9zaXRpb24nKTtcclxuICAgIGF0dExvY2F0aW9uWzFdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAnY29sb3InKTtcclxuICAgIGF0dExvY2F0aW9uWzJdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAndGV4dHVyZUNvb3JkJyk7XHJcbiAgICBcclxuICAgIC8vIGF0dHJpYnV0ZeOBruimgee0oOaVsOOCkumFjeWIl+OBq+agvOe0jVxyXG4gICAgYXR0U3RyaWRlWzBdID0gMztcclxuICAgIGF0dFN0cmlkZVsxXSA9IDQ7XHJcbiAgICBhdHRTdHJpZGVbMl0gPSAyO1xyXG4gICAgXHJcbiAgICAvLyDpoILngrnjga7kvY3nva5cclxuICAgIHZhciBwb3NpdGlvbiA9IFtcclxuICAgICAgICAtMS4wLCAgMS4wLCAgMC4wLFxyXG4gICAgICAgICAxLjAsICAxLjAsICAwLjAsXHJcbiAgICAgICAgLTEuMCwgLTEuMCwgIDAuMCxcclxuICAgICAgICAgMS4wLCAtMS4wLCAgMC4wXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyDpoILngrnoibJcclxuICAgIHZhciBjb2xvciA9IFtcclxuICAgICAgICAxLjAsIDEuMCwgMS4wLCAxLjAsXHJcbiAgICAgICAgMS4wLCAxLjAsIDEuMCwgMS4wLFxyXG4gICAgICAgIDEuMCwgMS4wLCAxLjAsIDEuMCxcclxuICAgICAgICAxLjAsIDEuMCwgMS4wLCAxLjBcclxuICAgIF07XHJcbiAgICBcclxuICAgIC8vIOODhuOCr+OCueODgeODo+W6p+aomVxyXG4gICAgdmFyIHRleHR1cmVDb29yZCA9IFtcclxuICAgICAgICAwLjAsIDAuMCxcclxuICAgICAgICAxLjAsIDAuMCxcclxuICAgICAgICAwLjAsIDEuMCxcclxuICAgICAgICAxLjAsIDEuMFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgLy8g6aCC54K544Kk44Oz44OH44OD44Kv44K5XHJcbiAgICB2YXIgaW5kZXggPSBbXHJcbiAgICAgICAgMCwgMSwgMixcclxuICAgICAgICAzLCAyLCAxXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyBWQk/jgahJQk/jga7nlJ/miJBcclxuICAgIHZhciB2UG9zaXRpb24gICAgID0gY3JlYXRlX3ZibyhnbCxwb3NpdGlvbik7XHJcbiAgICB2YXIgdkNvbG9yICAgICAgICA9IGNyZWF0ZV92Ym8oZ2wsY29sb3IpO1xyXG4gICAgdmFyIHZUZXh0dXJlQ29vcmQgPSBjcmVhdGVfdmJvKGdsLHRleHR1cmVDb29yZCk7XHJcbiAgICBWQk9MaXN0ICAgICAgID0gW3ZQb3NpdGlvbiwgdkNvbG9yLCB2VGV4dHVyZUNvb3JkXTtcclxuICAgIGlJbmRleCAgICAgICAgPSBjcmVhdGVfaWJvKGdsLGluZGV4KTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyB1bmlmb3JtTG9jYXRpb27jgpLphY3liJfjgavlj5blvpdcclxuICAgIHVuaUxvY2F0aW9uWzBdICA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsICdtdnBNYXRyaXgnKTtcclxuICAgIHVuaUxvY2F0aW9uWzFdICA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsICd0ZXh0dXJlJyk7XHJcbiAgICBcclxuICAgIC8vIC8vIOWQhOeoruihjOWIl+OBrueUn+aIkOOBqOWIneacn+WMllxyXG4gICAgLy8gdmFyIG0gPSBuZXcgbWF0SVYoKTtcclxuICAgIC8vIHZhciBtTWF0cml4ICAgPSBtLmlkZW50aXR5KG0uY3JlYXRlKCkpO1xyXG4gICAgLy8gdmFyIHZNYXRyaXggICA9IG0uaWRlbnRpdHkobS5jcmVhdGUoKSk7XHJcbiAgICAvLyB2YXIgcE1hdHJpeCAgID0gbS5pZGVudGl0eShtLmNyZWF0ZSgpKTtcclxuICAgIC8vIHZhciB0bXBNYXRyaXggPSBtLmlkZW50aXR5KG0uY3JlYXRlKCkpO1xyXG4gICAgLy8gdmFyIG12cE1hdHJpeCA9IG0uaWRlbnRpdHkobS5jcmVhdGUoKSk7XHJcbiAgICBcclxuICAgIC8vIOODk+ODpeODvMOX44OX44Ot44K444Kn44Kv44K344On44Oz5bqn5qiZ5aSJ5o+b6KGM5YiXXHJcbiAgICBtLmxvb2tBdChbMC4wLCAwLjAsIDUuMF0sIFswLCAwLCAwXSwgWzAsIDEsIDBdLCB2TWF0cml4KTtcclxuICAgIG0ucGVyc3BlY3RpdmUoNDUsIGMud2lkdGggLyBjLmhlaWdodCwgMC4xLCAxMDAsIHBNYXRyaXgpO1xyXG4gICAgbS5tdWx0aXBseShwTWF0cml4LCB2TWF0cml4LCB0bXBNYXRyaXgpO1xyXG4gICAgXHJcbiAgICAvLyDmt7Hluqbjg4bjgrnjg4jjgpLmnInlirnjgavjgZnjgotcclxuICAgIGdsLmVuYWJsZShnbC5ERVBUSF9URVNUKTtcclxuICAgIGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO1xyXG5cclxuXHJcbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcclxuXHJcbiAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgIHZhciBmQnVmZmVyV2lkdGggID0gNTEyO1xyXG4gICAgdmFyIGZCdWZmZXJIZWlnaHQgPSA1MTI7XHJcbiAgICBmQnVmZmVyID0gY3JlYXRlX2ZyYW1lYnVmZmVyKGdsLGZCdWZmZXJXaWR0aCwgZkJ1ZmZlckhlaWdodCk7XHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblxyXG5cdGdsLmNsZWFyQ29sb3IoMC4wLDAuMCwwLjAsMS4wKTtcclxuXHRteD0wLjU7bXk9MC41O1xyXG5cdHN0YXJ0VGltZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHJcblx0cmVuZGVyKCk7XHJcblxyXG59O1xyXG5mdW5jdGlvbiByZW5kZXIoKXtcclxuXHRpZighcnVuKXtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dGltZT0obmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUpKjAuMDAxO1xyXG5cdGNvdW50Kys7XHJcbiAgICB2YXIgcmFkPShjb3VudCUzNjApKk1hdGguUEkvMTgwO1xyXG5cclxuICAgIC8qLS3jg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHjgpLjg5DjgqTjg7Pjg4ktLSovXHJcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsZkJ1ZmZlci5mKTtcclxuICAgIGdsLmNsZWFyQ29sb3IoMC4wLDAuMCwwLjAsMS4wKTtcclxuLy8gICAgZ2wuY2xlYXJEZXB0aCgxLjApO1xyXG4vLyAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUfGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcblxyXG4gICAgZ2wudXNlUHJvZ3JhbSh0cHJnKTtcclxuICAgIC8vYXR0cmlidXRl44Gu55m76YyyXHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUix0dlBvc2l0aW9uKTtcclxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHR2QXR0TG9jYXRpb24pO1xyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0dkF0dExvY2F0aW9uLDMsZ2wuRkxPQVQsZmFsc2UsMCwwKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdHZJbmRleCk7XHJcblxyXG4vL1x0Y29uc29sZS5sb2codGltZSt0ZW1wVGltZSk7XHJcblx0Z2wudW5pZm9ybTFmKHRVbmlMb2NhdGlvblswXSx0aW1lK3RlbXBUaW1lKTtcclxuXHRnbC51bmlmb3JtMmZ2KHRVbmlMb2NhdGlvblsxXSxbbXgsbXldKTtcclxuXHRnbC51bmlmb3JtMmZ2KHRVbmlMb2NhdGlvblsyXSxbY3csY2hdKTtcclxuXHRnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLDYsZ2wuVU5TSUdORURfU0hPUlQsMCk7XHJcbi8vXHRnbC5mbHVzaCgpO1xyXG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLG51bGwpO1xyXG5cclxuXHJcbiAgICAvKi0tc2hhZGVy6IOM5pmv44KS5p2/44Od44Oq44Gr5YaZ44GZLS0qL1xyXG4gICAgZ2wuY2xlYXJDb2xvcigwLjAsMC4wLDAuMCwxLjApO1xyXG4gICAgZ2wuY2xlYXJEZXB0aCgxLjApO1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVHxnbC5ERVBUSF9CVUZGRVJfQklUKTtcclxuICAgIFxyXG4gICAgZ2wudXNlUHJvZ3JhbShwcmcpO1xyXG4gICAgLy8gVkJP44GoSUJP44Gu55m76YyyXHJcbiAgICBzZXRfYXR0cmlidXRlKGdsLFZCT0xpc3QsIGF0dExvY2F0aW9uLCBhdHRTdHJpZGUpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaUluZGV4KTtcclxuXHJcbiAgICBtLmlkZW50aXR5KG1NYXRyaXgpO1xyXG4gICAgbS5yb3RhdGUobU1hdHJpeCwgcmFkLCBbMCwgMSwgMF0sIG1NYXRyaXgpO1xyXG4gICAgbS5tdWx0aXBseSh0bXBNYXRyaXgsIG1NYXRyaXgsIG12cE1hdHJpeCk7XHJcbiAgICAvL+eZu+mMslxyXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCxmQnVmZmVyLnQpO1xyXG4gICAgZ2wudW5pZm9ybTFpKHVuaUxvY2F0aW9uWzFdLCAwKTtcclxuICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodW5pTG9jYXRpb25bMF0sIGZhbHNlLCBtdnBNYXRyaXgpO1xyXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xyXG5cclxuICAgIGdsLmZsdXNoKCk7XHJcblxyXG5cdHNldFRpbWVvdXQocmVuZGVyLGZwcyk7XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tDaGFuZ2UoZSl7XHJcblx0cnVuPWUuY3VycmVudFRhcmdldC5jaGVja2VkO1xyXG5cdGlmKHJ1bil7XHJcblx0XHRzdGFydFRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRyZW5kZXIoKTtcclxuXHR9ZWxzZXtcclxuXHRcdGNvbnNvbGUubG9nKFwidGltZVwiK3RpbWUpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJ0ZW1wVGltZVwiK3RlbXBUaW1lKTtcclxuXHRcdHRlbXBUaW1lKz10aW1lO1xyXG5cdH1cclxufVxyXG5mdW5jdGlvbiBtb3VzZU1vdmUoZSl7XHJcblx0bXg9ZS5vZmZzZXRYL2N3O1xyXG5cdG15PWUub2Zmc2V0WS9jaDtcclxufVxyXG4vLyDjgrfjgqfjg7zjg4DjgpLnlJ/miJDjgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX3NoYWRlcihfZ2wsX2lkKXtcclxuICAgIC8vIOOCt+OCp+ODvOODgOOCkuagvOe0jeOBmeOCi+WkieaVsFxyXG4gICAgdmFyIHNoYWRlcjtcclxuICAgIFxyXG4gICAgLy8gSFRNTOOBi+OCiXNjcmlwdOOCv+OCsOOBuOOBruWPgueFp+OCkuWPluW+l1xyXG4gICAgdmFyIHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfaWQpO1xyXG4gICAgXHJcbiAgICAvLyBzY3JpcHTjgr/jgrDjgYzlrZjlnKjjgZfjgarjgYTloLTlkIjjga/mipzjgZHjgotcclxuICAgIGlmKCFzY3JpcHRFbGVtZW50KXtyZXR1cm47fVxyXG4gICAgXHJcbiAgICAvLyBzY3JpcHTjgr/jgrDjga50eXBl5bGe5oCn44KS44OB44Kn44OD44KvXHJcbiAgICBzd2l0Y2goc2NyaXB0RWxlbWVudC50eXBlKXtcclxuICAgICAgICBcclxuICAgICAgICAvLyDpoILngrnjgrfjgqfjg7zjg4Djga7loLTlkIhcclxuICAgICAgICBjYXNlICd4LXNoYWRlci94LXZlcnRleCc6XHJcbiAgICAgICAgICAgIHNoYWRlciA9IF9nbC5jcmVhdGVTaGFkZXIoX2dsLlZFUlRFWF9TSEFERVIpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8g44OV44Op44Kw44Oh44Oz44OI44K344Kn44O844OA44Gu5aC05ZCIXHJcbiAgICAgICAgY2FzZSAneC1zaGFkZXIveC1mcmFnbWVudCc6XHJcbiAgICAgICAgICAgIHNoYWRlciA9IF9nbC5jcmVhdGVTaGFkZXIoX2dsLkZSQUdNRU5UX1NIQURFUik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQgOlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOeUn+aIkOOBleOCjOOBn+OCt+OCp+ODvOODgOOBq+OCveODvOOCueOCkuWJsuOCiuW9k+OBpuOCi1xyXG4gICAgX2dsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNjcmlwdEVsZW1lbnQudGV4dCk7XHJcbiAgICBcclxuICAgIC8vIOOCt+OCp+ODvOODgOOCkuOCs+ODs+ODkeOCpOODq+OBmeOCi1xyXG4gICAgX2dsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuICAgIFxyXG4gICAgLy8g44K344Kn44O844OA44GM5q2j44GX44GP44Kz44Oz44OR44Kk44Or44GV44KM44Gf44GL44OB44Kn44OD44KvXHJcbiAgICBpZihfZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgX2dsLkNPTVBJTEVfU1RBVFVTKSl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5oiQ5Yqf44GX44Gm44GE44Gf44KJ44K344Kn44O844OA44KS6L+U44GX44Gm57WC5LqGXHJcbiAgICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWkseaVl+OBl+OBpuOBhOOBn+OCieOCqOODqeODvOODreOCsOOCkuOCouODqeODvOODiOOBmeOCi1xyXG4gICAgICAgIGFsZXJ0KF9nbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xyXG4gICAgfVxyXG59XHJcbi8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOCkueUn+aIkOOBl+OCt+OCp+ODvOODgOOCkuODquODs+OCr+OBmeOCi+mWouaVsFxyXG5mdW5jdGlvbiBjcmVhdGVfcHJvZ3JhbShfZ2wsX3ZzLCBfZnMpe1xyXG4gICAgLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44Gu55Sf5oiQXHJcbiAgICB2YXIgcHJvZ3JhbSA9IF9nbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBcclxuICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOBq+OCt+OCp+ODvOODgOOCkuWJsuOCiuW9k+OBpuOCi1xyXG4gICAgX2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBfdnMpO1xyXG4gICAgX2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBfZnMpO1xyXG4gICAgXHJcbiAgICAvLyDjgrfjgqfjg7zjg4DjgpLjg6rjg7Pjgq9cclxuICAgIF9nbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgIFxyXG4gICAgLy8g44K344Kn44O844OA44Gu44Oq44Oz44Kv44GM5q2j44GX44GP6KGM44Gq44KP44KM44Gf44GL44OB44Kn44OD44KvXHJcbiAgICBpZihfZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBfZ2wuTElOS19TVEFUVVMpKXtcclxuICAgIFxyXG4gICAgICAgIC8vIOaIkOWKn+OBl+OBpuOBhOOBn+OCieODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOCkuacieWKueOBq+OBmeOCi1xyXG4gICAgICAgIF9nbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgIHJldHVybiBwcm9ncmFtO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5aSx5pWX44GX44Gm44GE44Gf44KJ44Ko44Op44O844Ot44Kw44KS44Ki44Op44O844OI44GZ44KLXHJcbiAgICAgICAgYWxlcnQoX2dsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcclxuICAgIH1cclxufVxyXG4vLyBWQk/jgpLnlJ/miJDjgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX3ZibyhfZ2wsX2RhdGEpe1xyXG4gICAgLy8g44OQ44OD44OV44Kh44Kq44OW44K444Kn44Kv44OI44Gu55Sf5oiQXHJcbiAgICB2YXIgdmJvID0gX2dsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsIHZibyk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOBq+ODh+ODvOOCv+OCkuOCu+ODg+ODiFxyXG4gICAgX2dsLmJ1ZmZlckRhdGEoX2dsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShfZGF0YSksIF9nbC5TVEFUSUNfRFJBVyk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOBruODkOOCpOODs+ODieOCkueEoeWKueWMllxyXG4gICAgX2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICBcclxuICAgIC8vIOeUn+aIkOOBl+OBnyBWQk8g44KS6L+U44GX44Gm57WC5LqGXHJcbiAgICByZXR1cm4gdmJvO1xyXG59XHJcbi8vIElCT+OCkueUn+aIkOOBmeOCi+mWouaVsFxyXG5mdW5jdGlvbiBjcmVhdGVfaWJvKF9nbCxfZGF0YSl7XHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgIHZhciBpYm8gPSBfZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOCkuODkOOCpOODs+ODieOBmeOCi1xyXG4gICAgX2dsLmJpbmRCdWZmZXIoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpYm8pO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgavjg4fjg7zjgr/jgpLjgrvjg4Pjg4hcclxuICAgIF9nbC5idWZmZXJEYXRhKF9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IEludDE2QXJyYXkoX2RhdGEpLCBfZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjga7jg5DjgqTjg7Pjg4njgpLnhKHlirnljJZcclxuICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICBcclxuICAgIC8vIOeUn+aIkOOBl+OBn0lCT+OCkui/lOOBl+OBpue1guS6hlxyXG4gICAgcmV0dXJuIGlibztcclxufVxyXG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlKF9nbCxfdmJvLCBfYXR0TCwgX2F0dFMpe1xyXG4gICAgLy8g5byV5pWw44Go44GX44Gm5Y+X44GR5Y+W44Gj44Gf6YWN5YiX44KS5Yem55CG44GZ44KLXHJcbiAgICBmb3IodmFyIGkgaW4gX3Zibyl7XHJcbiAgICAgICAgLy8g44OQ44OD44OV44Kh44KS44OQ44Kk44Oz44OJ44GZ44KLXHJcbiAgICAgICAgX2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUiwgX3Zib1tpXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gYXR0cmlidXRlTG9jYXRpb27jgpLmnInlirnjgavjgZnjgotcclxuICAgICAgICBfZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoX2F0dExbaV0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGF0dHJpYnV0ZUxvY2F0aW9u44KS6YCa55+l44GX55m76Yyy44GZ44KLXHJcbiAgICAgICAgX2dsLnZlcnRleEF0dHJpYlBvaW50ZXIoX2F0dExbaV0sIF9hdHRTW2ldLCBfZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgIH1cclxufVxyXG4vLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHjgpLjgqrjg5bjgrjjgqfjgq/jg4jjgajjgZfjgabnlJ/miJDjgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX2ZyYW1lYnVmZmVyKF9nbCxfd2lkdGgsIF9oZWlnaHQpe1xyXG4gICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh44Gu55Sf5oiQXHJcbiAgICB2YXIgZnJhbWVCdWZmZXIgPSBfZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcclxuICAgIFxyXG4gICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh44KSV2ViR0zjgavjg5DjgqTjg7Pjg4lcclxuICAgIF9nbC5iaW5kRnJhbWVidWZmZXIoX2dsLkZSQU1FQlVGRkVSLCBmcmFtZUJ1ZmZlcik7XHJcbiAgICBcclxuICAgIC8vIOa3seW6puODkOODg+ODleOCoeeUqOODrOODs+ODgOODvOODkOODg+ODleOCoeOBrueUn+aIkOOBqOODkOOCpOODs+ODiVxyXG4gICAgdmFyIGRlcHRoUmVuZGVyQnVmZmVyID0gX2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xyXG4gICAgX2dsLmJpbmRSZW5kZXJidWZmZXIoX2dsLlJFTkRFUkJVRkZFUiwgZGVwdGhSZW5kZXJCdWZmZXIpO1xyXG4gICAgXHJcbiAgICAvLyDjg6zjg7Pjg4Djg7zjg5Djg4Pjg5XjgqHjgpLmt7Hluqbjg5Djg4Pjg5XjgqHjgajjgZfjgaboqK3lrppcclxuICAgIF9nbC5yZW5kZXJidWZmZXJTdG9yYWdlKF9nbC5SRU5ERVJCVUZGRVIsIF9nbC5ERVBUSF9DT01QT05FTlQxNiwgX3dpZHRoLCBfaGVpZ2h0KTtcclxuICAgIFxyXG4gICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh44Gr44Os44Oz44OA44O844OQ44OD44OV44Kh44KS6Zai6YCj5LuY44GR44KLXHJcbiAgICBfZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoX2dsLkZSQU1FQlVGRkVSLCBfZ2wuREVQVEhfQVRUQUNITUVOVCwgX2dsLlJFTkRFUkJVRkZFUiwgZGVwdGhSZW5kZXJCdWZmZXIpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHnlKjjg4bjgq/jgrnjg4Hjg6Pjga7nlJ/miJBcclxuICAgIHZhciBmVGV4dHVyZSA9IF9nbC5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgICBcclxuICAgIC8vIOODleODrOODvOODoOODkOODg+ODleOCoeeUqOOBruODhuOCr+OCueODgeODo+OCkuODkOOCpOODs+ODiVxyXG4gICAgX2dsLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELCBmVGV4dHVyZSk7XHJcbiAgICBcclxuICAgIC8vIOODleODrOODvOODoOODkOODg+ODleOCoeeUqOOBruODhuOCr+OCueODgeODo+OBq+OCq+ODqeODvOeUqOOBruODoeODouODqumgmOWfn+OCkueiuuS/nVxyXG4gICAgX2dsLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsIDAsIF9nbC5SR0JBLCBfd2lkdGgsIF9oZWlnaHQsIDAsIF9nbC5SR0JBLCBfZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XHJcbiAgICBcclxuICAgIC8vIOODhuOCr+OCueODgeODo+ODkeODqeODoeODvOOCv1xyXG4gICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX01BR19GSUxURVIsIF9nbC5MSU5FQVIpO1xyXG4gICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX01JTl9GSUxURVIsIF9nbC5MSU5FQVIpO1xyXG4gICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX1dSQVBfUywgX2dsLkNMQU1QX1RPX0VER0UpO1xyXG4gICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX1dSQVBfVCwgX2dsLkNMQU1QX1RPX0VER0UpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHjgavjg4bjgq/jgrnjg4Hjg6PjgpLplqLpgKPku5jjgZHjgotcclxuICAgIF9nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChfZ2wuRlJBTUVCVUZGRVIsIF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCwgX2dsLlRFWFRVUkVfMkQsIGZUZXh0dXJlLCAwKTtcclxuICAgIFxyXG4gICAgLy8g5ZCE56iu44Kq44OW44K444Kn44Kv44OI44Gu44OQ44Kk44Oz44OJ44KS6Kej6ZmkXHJcbiAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgX2dsLmJpbmRSZW5kZXJidWZmZXIoX2dsLlJFTkRFUkJVRkZFUiwgbnVsbCk7XHJcbiAgICBfZ2wuYmluZEZyYW1lYnVmZmVyKF9nbC5GUkFNRUJVRkZFUiwgbnVsbCk7XHJcbiAgICBcclxuICAgIC8vIOOCquODluOCuOOCp+OCr+ODiOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgcmV0dXJuIHtmIDogZnJhbWVCdWZmZXIsIGQgOiBkZXB0aFJlbmRlckJ1ZmZlciwgdCA6IGZUZXh0dXJlfTtcclxufVxyXG4gICAgXHJcbiJdfQ==
