(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var c, cw, ch, mx, my, gl, run, eCheck;
var startTime;
var time = 0.0;
var tempTime = 0.0;
var fps = 1000 / 30;
var uniLocation = new Array();

window.onload = function () {
  c = document.getElementById("canvas");
  cw = 512;
  ch = 512;
  c.width = cw;
  c.height = ch;

  eCheck = document.getElementById("check");

  c.addEventListener("mousemove", mouseMove, true);
  eCheck.addEventListener("change", checkChange, true);

  gl = c.getContext("webgl") || c.getContext("experimental-webgl");

  var prg = create_program(gl, create_shader(gl, "vs"), create_shader(gl, "fs"));
  run = prg != null;
  if (!run) {
    eCheck.checked = false;
  }
  uniLocation[0] = gl.getUniformLocation(prg, "time");
  uniLocation[1] = gl.getUniformLocation(prg, "mouse");
  uniLocation[2] = gl.getUniformLocation(prg, "iResolution");

  var position = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, -1.0, 0.0];
  var index = [0, 2, 1, 1, 2, 3];
  var vPosition = create_vbo(gl, position);
  var vIndex = create_ibo(gl, index);
  var vAttLocation = gl.getAttribLocation(prg, "position");
  gl.bindBuffer(gl.ARRAY_BUFFER, vPosition);
  gl.enableVertexAttribArray(vAttLocation);
  gl.vertexAttribPointer(vAttLocation, 3, gl.FLOAT, false, 0, 0);
  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, vIndex);

  gl.clearColor(0.0, 0.0, 0.0, 1.0);
  mx = 0.5;my = 0.5;
  startTime = new Date().getTime();

  render();
};
function render() {
  if (!run) {
    return;
  }
  time = (new Date().getTime() - startTime) * 0.001;
  gl.clear(gl.COLOR_BUFFER_BIT);

  //	console.log(time+tempTime);
  gl.uniform1f(uniLocation[0], time + tempTime);
  gl.uniform2fv(uniLocation[1], [mx, my]);
  gl.uniform2fv(uniLocation[2], [cw, ch]);

  gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
  gl.flush();

  setTimeout(render, fps);
}
function checkChange(e) {
  run = e.currentTarget.checked;
  if (run) {
    startTime = new Date().getTime();
    render();
  } else {
    console.log("time" + time);
    console.log("tempTime" + tempTime);
    tempTime += time;
  }
}
function mouseMove(e) {
  mx = e.offsetX / cw;
  my = e.offsetY / ch;
}
// シェーダを生成する関数
function create_shader(_gl, _id) {
  console.log(_gl);
  // シェーダを格納する変数
  var shader;

  // HTMLからscriptタグへの参照を取得
  var scriptElement = document.getElementById(_id);

  // scriptタグが存在しない場合は抜ける
  if (!scriptElement) {
    return;
  }

  // scriptタグのtype属性をチェック
  switch (scriptElement.type) {

    // 頂点シェーダの場合
    case 'x-shader/x-vertex':
      shader = _gl.createShader(_gl.VERTEX_SHADER);
      break;

    // フラグメントシェーダの場合
    case 'x-shader/x-fragment':
      shader = _gl.createShader(_gl.FRAGMENT_SHADER);
      break;
    default:
      return;
  }

  // 生成されたシェーダにソースを割り当てる
  _gl.shaderSource(shader, scriptElement.text);

  // シェーダをコンパイルする
  _gl.compileShader(shader);

  // シェーダが正しくコンパイルされたかチェック
  if (_gl.getShaderParameter(shader, _gl.COMPILE_STATUS)) {

    // 成功していたらシェーダを返して終了
    return shader;
  } else {

    // 失敗していたらエラーログをアラートする
    alert(_gl.getShaderInfoLog(shader));
  }
}
// プログラムオブジェクトを生成しシェーダをリンクする関数
function create_program(_gl, _vs, _fs) {
  // プログラムオブジェクトの生成
  var program = _gl.createProgram();

  // プログラムオブジェクトにシェーダを割り当てる
  _gl.attachShader(program, _vs);
  _gl.attachShader(program, _fs);

  // シェーダをリンク
  _gl.linkProgram(program);

  // シェーダのリンクが正しく行なわれたかチェック
  if (_gl.getProgramParameter(program, _gl.LINK_STATUS)) {

    // 成功していたらプログラムオブジェクトを有効にする
    _gl.useProgram(program);

    // プログラムオブジェクトを返して終了
    return program;
  } else {

    // 失敗していたらエラーログをアラートする
    alert(_gl.getProgramInfoLog(program));
  }
}
// VBOを生成する関数
function create_vbo(_gl, _data) {
  // バッファオブジェクトの生成
  var vbo = _gl.createBuffer();

  // バッファをバインドする
  _gl.bindBuffer(_gl.ARRAY_BUFFER, vbo);

  // バッファにデータをセット
  _gl.bufferData(_gl.ARRAY_BUFFER, new Float32Array(_data), _gl.STATIC_DRAW);

  // バッファのバインドを無効化
  _gl.bindBuffer(_gl.ARRAY_BUFFER, null);

  // 生成した VBO を返して終了
  return vbo;
}
// IBOを生成する関数
function create_ibo(_gl, _data) {
  // バッファオブジェクトの生成
  var ibo = _gl.createBuffer();

  // バッファをバインドする
  _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, ibo);

  // バッファにデータをセット
  _gl.bufferData(_gl.ELEMENT_ARRAY_BUFFER, new Int16Array(_data), _gl.STATIC_DRAW);

  // バッファのバインドを無効化
  _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, null);

  // 生成したIBOを返して終了
  return ibo;
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzaGFkZXJUZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLENBQUosRUFBTSxFQUFOLEVBQVMsRUFBVCxFQUFZLEVBQVosRUFBZSxFQUFmLEVBQWtCLEVBQWxCLEVBQXFCLEdBQXJCLEVBQXlCLE1BQXpCO0FBQ0EsSUFBSSxTQUFKO0FBQ0EsSUFBSSxPQUFLLEdBQVQ7QUFDQSxJQUFJLFdBQVMsR0FBYjtBQUNBLElBQUksTUFBSSxPQUFLLEVBQWI7QUFDQSxJQUFJLGNBQVksSUFBSSxLQUFKLEVBQWhCOztBQUVBLE9BQU8sTUFBUCxHQUFjLFlBQVU7QUFDdkIsTUFBRSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBRjtBQUNBLE9BQUcsR0FBSDtBQUNBLE9BQUcsR0FBSDtBQUNBLElBQUUsS0FBRixHQUFRLEVBQVI7QUFDQSxJQUFFLE1BQUYsR0FBUyxFQUFUOztBQUVBLFdBQU8sU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVA7O0FBRUEsSUFBRSxnQkFBRixDQUFtQixXQUFuQixFQUErQixTQUEvQixFQUF5QyxJQUF6QztBQUNBLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBaUMsV0FBakMsRUFBNkMsSUFBN0M7O0FBRUEsT0FBRyxFQUFFLFVBQUYsQ0FBYSxPQUFiLEtBQXVCLEVBQUUsVUFBRixDQUFhLG9CQUFiLENBQTFCOztBQUVBLE1BQUksTUFBSSxlQUFlLEVBQWYsRUFBa0IsY0FBYyxFQUFkLEVBQWlCLElBQWpCLENBQWxCLEVBQXlDLGNBQWMsRUFBZCxFQUFpQixJQUFqQixDQUF6QyxDQUFSO0FBQ0EsUUFBSyxPQUFLLElBQVY7QUFDQSxNQUFHLENBQUMsR0FBSixFQUFRO0FBQ1AsV0FBTyxPQUFQLEdBQWUsS0FBZjtBQUNBO0FBQ0QsY0FBWSxDQUFaLElBQWUsR0FBRyxrQkFB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LFVBQVQsQ0FBb0IsR0FBcEIsRUFBd0IsS0FBeEIsRUFBOEI7QUFDMUI7QUFDQSxNQUFJLE1BQU0sSUFBSSxZQUFKLEVBQVY7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLFlBQW5CLEVBQWlDLEdBQWpDOztBQUVBO0FBQ0EsTUFBSSxVQUFKLENBQWUsSUFBSSxZQUFuQixFQUFpQyxJQUFJLFlBQUosQ0FBaUIsS0FBakIsQ0FBakMsRUFBMEQsSUFBSSxXQUE5RDs7QUFFQTtBQUNBLE1BQUksVUFBSixDQUFlLElBQUksWUFBbkIsRUFBaUMsSUFBakM7O0FBRUE7QUFDQSxTQUFPLEdBQVA7QUFDSDtBQUNEO0FBQ0EsU0FBUyxVQUFULENBQW9CLEdBQXBCLEVBQXdCLEtBQXhCLEVBQThCO0FBQzFCO0FBQ0EsTUFBSSxNQUFNLElBQUksWUFBSixFQUFWOztBQUVBO0FBQ0EsTUFBSSxVQUFKLENBQWUsSUFBSSxvQkFBbkIsRUFBeUMsR0FBekM7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLG9CQUFuQixFQUF5QyxJQUFJLFVBQUosQ0FBZSxLQUFmLENBQXpDLEVBQWdFLElBQUksV0FBcEU7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLG9CQUFuQixFQUF5QyxJQUF6Qzs7QUFFQTtBQUNBLFNBQU8sR0FBUDtBQUNIIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBjLGN3LGNoLG14LG15LGdsLHJ1bixlQ2hlY2s7XHJcbnZhciBzdGFydFRpbWU7XHJcbnZhciB0aW1lPTAuMDtcclxudmFyIHRlbXBUaW1lPTAuMDtcclxudmFyIGZwcz0xMDAwLzMwO1xyXG52YXIgdW5pTG9jYXRpb249bmV3IEFycmF5KCk7XHJcblxyXG53aW5kb3cub25sb2FkPWZ1bmN0aW9uKCl7XHJcblx0Yz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxuXHRjdz01MTI7XHJcblx0Y2g9NTEyO1xyXG5cdGMud2lkdGg9Y3c7XHJcblx0Yy5oZWlnaHQ9Y2g7XHJcblxyXG5cdGVDaGVjaz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoZWNrXCIpO1xyXG5cclxuXHRjLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixtb3VzZU1vdmUsdHJ1ZSk7XHJcblx0ZUNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIixjaGVja0NoYW5nZSx0cnVlKTtcclxuXHJcblx0Z2w9Yy5nZXRDb250ZXh0KFwid2ViZ2xcIil8fGMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiKTtcclxuXHJcblx0dmFyIHByZz1jcmVhdGVfcHJvZ3JhbShnbCxjcmVhdGVfc2hhZGVyKGdsLFwidnNcIiksY3JlYXRlX3NoYWRlcihnbCxcImZzXCIpKTtcclxuXHRydW49KHByZyE9bnVsbCk7XHJcblx0aWYoIXJ1bil7XHJcblx0XHRlQ2hlY2suY2hlY2tlZD1mYWxzZTtcclxuXHR9XHJcblx0dW5pTG9jYXRpb25bMF09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZyxcInRpbWVcIik7XHJcblx0dW5pTG9jYXRpb25bMV09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZyxcIm1vdXNlXCIpO1xyXG5cdHVuaUxvY2F0aW9uWzJdPWdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsXCJpUmVzb2x1dGlvblwiKTtcclxuXHJcblx0dmFyIHBvc2l0aW9uPVtcclxuXHQtMS4wLDEuMCwwLjAsXHJcblx0MS4wLDEuMCwwLjAsXHJcblx0LTEuMCwtMS4wLDAuMCxcclxuXHQxLjAsLTEuMCwwLjAsXHJcblx0XVxyXG5cdHZhciBpbmRleD1bXHJcblx0MCwyLDEsXHJcblx0MSwyLDNcclxuXHRdXHJcblx0dmFyIHZQb3NpdGlvbj1jcmVhdGVfdmJvKGdsLHBvc2l0aW9uKTtcclxuXHR2YXIgdkluZGV4PWNyZWF0ZV9pYm8oZ2wsaW5kZXgpO1xyXG5cdHZhciB2QXR0TG9jYXRpb249Z2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLFwicG9zaXRpb25cIik7XHJcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsdlBvc2l0aW9uKTtcclxuXHRnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh2QXR0TG9jYXRpb24pO1xyXG5cdGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodkF0dExvY2F0aW9uLDMsZ2wuRkxPQVQsZmFsc2UsMCwwKTtcclxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHZJbmRleCk7XHJcblxyXG5cdGdsLmNsZWFyQ29sb3IoMC4wLDAuMCwwLjAsMS4wKTtcclxuXHRteD0wLjU7bXk9MC41O1xyXG5cdHN0YXJ0VGltZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHJcblx0cmVuZGVyKCk7XHJcblxyXG59XHJcbmZ1bmN0aW9uIHJlbmRlcigpe1xyXG5cdGlmKCFydW4pe1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR0aW1lPShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZSkqMC4wMDE7XHJcblx0Z2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcblxyXG4vL1x0Y29uc29sZS5sb2codGltZSt0ZW1wVGltZSk7XHJcblx0Z2wudW5pZm9ybTFmKHVuaUxvY2F0aW9uWzBdLHRpbWUrdGVtcFRpbWUpO1xyXG5cdGdsLnVuaWZvcm0yZnYodW5pTG9jYXRpb25bMV0sW214LG15XSk7XHJcblx0Z2wudW5pZm9ybTJmdih1bmlMb2NhdGlvblsyXSxbY3csY2hdKTtcclxuXHJcblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUyw2LGdsLlVOU0lHTkVEX1NIT1JULDApO1xyXG5cdGdsLmZsdXNoKCk7XHJcblxyXG5cdHNldFRpbWVvdXQocmVuZGVyLGZwcyk7XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tDaGFuZ2UoZSl7XHJcblx0cnVuPWUuY3VycmVudFRhcmdldC5jaGVja2VkO1xyXG5cdGlmKHJ1bil7XHJcblx0XHRzdGFydFRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRyZW5kZXIoKTtcclxuXHR9ZWxzZXtcclxuXHRcdGNvbnNvbGUubG9nKFwidGltZVwiK3RpbWUpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJ0ZW1wVGltZVwiK3RlbXBUaW1lKTtcclxuXHRcdHRlbXBUaW1lKz10aW1lO1xyXG5cdH1cclxufVxyXG5mdW5jdGlvbiBtb3VzZU1vdmUoZSl7XHJcblx0bXg9ZS5vZmZzZXRYL2N3O1xyXG5cdG15PWUub2Zmc2V0WS9jaDtcclxufVxyXG4vLyDjgrfjgqfjg7zjg4DjgpLnlJ/miJDjgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX3NoYWRlcihfZ2wsX2lkKXtcclxuXHRjb25zb2xlLmxvZyhfZ2wpO1xyXG4gICAgLy8g44K344Kn44O844OA44KS5qC857SN44GZ44KL5aSJ5pWwXHJcbiAgICB2YXIgc2hhZGVyO1xyXG4gICAgXHJcbiAgICAvLyBIVE1M44GL44KJc2NyaXB044K/44Kw44G444Gu5Y+C54Wn44KS5Y+W5b6XXHJcbiAgICB2YXIgc2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9pZCk7XHJcbiAgICBcclxuICAgIC8vIHNjcmlwdOOCv+OCsOOBjOWtmOWcqOOBl+OBquOBhOWgtOWQiOOBr+aKnOOBkeOCi1xyXG4gICAgaWYoIXNjcmlwdEVsZW1lbnQpe3JldHVybjt9XHJcbiAgICBcclxuICAgIC8vIHNjcmlwdOOCv+OCsOOBrnR5cGXlsZ7mgKfjgpLjg4Hjgqfjg4Pjgq9cclxuICAgIHN3aXRjaChzY3JpcHRFbGVtZW50LnR5cGUpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOmggueCueOCt+OCp+ODvOODgOOBruWgtOWQiFxyXG4gICAgICAgIGNhc2UgJ3gtc2hhZGVyL3gtdmVydGV4JzpcclxuICAgICAgICAgICAgc2hhZGVyID0gX2dsLmNyZWF0ZVNoYWRlcihfZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyDjg5Xjg6njgrDjg6Hjg7Pjg4jjgrfjgqfjg7zjg4Djga7loLTlkIhcclxuICAgICAgICBjYXNlICd4LXNoYWRlci94LWZyYWdtZW50JzpcclxuICAgICAgICAgICAgc2hhZGVyID0gX2dsLmNyZWF0ZVNoYWRlcihfZ2wuRlJBR01FTlRfU0hBREVSKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdCA6XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g55Sf5oiQ44GV44KM44Gf44K344Kn44O844OA44Gr44K944O844K544KS5Ymy44KK5b2T44Gm44KLXHJcbiAgICBfZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2NyaXB0RWxlbWVudC50ZXh0KTtcclxuICAgIFxyXG4gICAgLy8g44K344Kn44O844OA44KS44Kz44Oz44OR44Kk44Or44GZ44KLXHJcbiAgICBfZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgXHJcbiAgICAvLyDjgrfjgqfjg7zjg4DjgYzmraPjgZfjgY/jgrPjg7Pjg5HjgqTjg6vjgZXjgozjgZ/jgYvjg4Hjgqfjg4Pjgq9cclxuICAgIGlmKF9nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBfZ2wuQ09NUElMRV9TVEFUVVMpKXtcclxuICAgICAgICBcclxuICAgICAgICAvLyDmiJDlip/jgZfjgabjgYTjgZ/jgonjgrfjgqfjg7zjg4DjgpLov5TjgZfjgabntYLkuoZcclxuICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5aSx5pWX44GX44Gm44GE44Gf44KJ44Ko44Op44O844Ot44Kw44KS44Ki44Op44O844OI44GZ44KLXHJcbiAgICAgICAgYWxlcnQoX2dsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICB9XHJcbn1cclxuLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44KS55Sf5oiQ44GX44K344Kn44O844OA44KS44Oq44Oz44Kv44GZ44KL6Zai5pWwXHJcbmZ1bmN0aW9uIGNyZWF0ZV9wcm9ncmFtKF9nbCxfdnMsIF9mcyl7XHJcbiAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgIHZhciBwcm9ncmFtID0gX2dsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgIFxyXG4gICAgLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44Gr44K344Kn44O844OA44KS5Ymy44KK5b2T44Gm44KLXHJcbiAgICBfZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIF92cyk7XHJcbiAgICBfZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIF9mcyk7XHJcbiAgICBcclxuICAgIC8vIOOCt+OCp+ODvOODgOOCkuODquODs+OCr1xyXG4gICAgX2dsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgXHJcbiAgICAvLyDjgrfjgqfjg7zjg4Djga7jg6rjg7Pjgq/jgYzmraPjgZfjgY/ooYzjgarjgo/jgozjgZ/jgYvjg4Hjgqfjg4Pjgq9cclxuICAgIGlmKF9nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIF9nbC5MSU5LX1NUQVRVUykpe1xyXG4gICAgXHJcbiAgICAgICAgLy8g5oiQ5Yqf44GX44Gm44GE44Gf44KJ44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44KS5pyJ5Yq544Gr44GZ44KLXHJcbiAgICAgICAgX2dsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g44OX44Ot44Kw44Op44Og44Kq44OW44K444Kn44Kv44OI44KS6L+U44GX44Gm57WC5LqGXHJcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBcclxuICAgICAgICAvLyDlpLHmlZfjgZfjgabjgYTjgZ/jgonjgqjjg6njg7zjg63jgrDjgpLjgqLjg6njg7zjg4jjgZnjgotcclxuICAgICAgICBhbGVydChfZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgfVxyXG59XHJcbi8vIFZCT+OCkueUn+aIkOOBmeOCi+mWouaVsFxyXG5mdW5jdGlvbiBjcmVhdGVfdmJvKF9nbCxfZGF0YSl7XHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgIHZhciB2Ym8gPSBfZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOCkuODkOOCpOODs+ODieOBmeOCi1xyXG4gICAgX2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUiwgdmJvKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44Gr44OH44O844K/44KS44K744OD44OIXHJcbiAgICBfZ2wuYnVmZmVyRGF0YShfZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KF9kYXRhKSwgX2dsLlNUQVRJQ19EUkFXKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44Gu44OQ44Kk44Oz44OJ44KS54Sh5Yq55YyWXHJcbiAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgIFxyXG4gICAgLy8g55Sf5oiQ44GX44GfIFZCTyDjgpLov5TjgZfjgabntYLkuoZcclxuICAgIHJldHVybiB2Ym87XHJcbn1cclxuLy8gSUJP44KS55Sf5oiQ44GZ44KL6Zai5pWwXHJcbmZ1bmN0aW9uIGNyZWF0ZV9pYm8oX2dsLF9kYXRhKXtcclxuICAgIC8vIOODkOODg+ODleOCoeOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgdmFyIGlibyA9IF9nbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44KS44OQ44Kk44Oz44OJ44GZ44KLXHJcbiAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGlibyk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOBq+ODh+ODvOOCv+OCkuOCu+ODg+ODiFxyXG4gICAgX2dsLmJ1ZmZlckRhdGEoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgSW50MTZBcnJheShfZGF0YSksIF9nbC5TVEFUSUNfRFJBVyk7XHJcbiAgICBcclxuICAgIC8vIOODkOODg+ODleOCoeOBruODkOOCpOODs+ODieOCkueEoeWKueWMllxyXG4gICAgX2dsLmJpbmRCdWZmZXIoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgIFxyXG4gICAgLy8g55Sf5oiQ44GX44GfSUJP44KS6L+U44GX44Gm57WC5LqGXHJcbiAgICByZXR1cm4gaWJvO1xyXG59XHJcbiJdfQ==
