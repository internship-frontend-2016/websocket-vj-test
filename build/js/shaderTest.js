(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var c, cw, ch, mx, my, gl, run, eCheck;
var startTime;
var time = 0.0;
var tempTime = 0.0;
var fps = 1000 / 30;
var uniLocation = [];

window.onload = function () {
  c = document.getElementById("canvas");
  cw = 512;
  ch = 512;
  c.width = cw;
  c.height = ch;

  eCheck = document.getElementById("check");

  c.addEventListener("mousemove", mouseMove, true);
  eCheck.addEventListener("change", checkChange, true);

  gl = c.getContext("webgl") || c.getContext("experimental-webgl");

  var prg = create_program(gl, create_shader(gl, "vs"), create_shader(gl, "fs"));
  run = prg !== null;
  if (!run) {
    eCheck.checked = false;
  }
  uniLocation[0] = gl.getUniformLocation(prg, "time");
  uniLocation[1] = gl.getUniformLocation(prg, "mouse");
  uniLocation[2] = gl.getUniformLocation(prg, "iResolution");

  var position = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, -1.0, -1.0, 0.0, 1.0, -1.0, 0.0];
  var index = [0, 2, 1, 1, 2, 3];
  var vPosition = create_vbo(gl, position);
  var vIndex = create_ibo(gl, index);
  var vAttLocation = gl.getAttribLocation(prg, "position");
  gl.bindBuffer(gl.ARRAY_BUFFER, vPosition);
  gl.enableVertexAttribArray(vAttLocation);
  gl.vertexAttribPointer(vAttLocation, 3, gl.FLOAT, false, 0, 0);
  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, vIndex);

  gl.clearColor(0.0, 0.0, 0.0, 1.0);
  mx = 0.5;my = 0.5;
  startTime = new Date().getTime();

  render();
};
function render() {
  if (!run) {
    return;
  }
  time = (new Date().getTime() - startTime) * 0.001;
  gl.clear(gl.COLOR_BUFFER_BIT);

  //	console.log(time+tempTime);
  gl.uniform1f(uniLocation[0], time + tempTime);
  gl.uniform2fv(uniLocation[1], [mx, my]);
  gl.uniform2fv(uniLocation[2], [cw, ch]);

  gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
  gl.flush();

  setTimeout(render, fps);
}
function checkChange(e) {
  run = e.currentTarget.checked;
  if (run) {
    startTime = new Date().getTime();
    render();
  } else {
    console.log("time" + time);
    console.log("tempTime" + tempTime);
    tempTime += time;
  }
}
function mouseMove(e) {
  mx = e.offsetX / cw;
  my = e.offsetY / ch;
}
// シェーダを生成する関数
function create_shader(_gl, _id) {
  console.log(_gl);
  // シェーダを格納する変数
  var shader;

  // HTMLからscriptタグへの参照を取得
  var scriptElement = document.getElementById(_id);

  // scriptタグが存在しない場合は抜ける
  if (!scriptElement) {
    return;
  }

  // scriptタグのtype属性をチェック
  switch (scriptElement.type) {

    // 頂点シェーダの場合
    case 'x-shader/x-vertex':
      shader = _gl.createShader(_gl.VERTEX_SHADER);
      break;

    // フラグメントシェーダの場合
    case 'x-shader/x-fragment':
      shader = _gl.createShader(_gl.FRAGMENT_SHADER);
      break;
    default:
      return;
  }

  // 生成されたシェーダにソースを割り当てる
  _gl.shaderSource(shader, scriptElement.text);

  // シェーダをコンパイルする
  _gl.compileShader(shader);

  // シェーダが正しくコンパイルされたかチェック
  if (_gl.getShaderParameter(shader, _gl.COMPILE_STATUS)) {

    // 成功していたらシェーダを返して終了
    return shader;
  } else {

    // 失敗していたらエラーログをアラートする
    alert(_gl.getShaderInfoLog(shader));
  }
}
// プログラムオブジェクトを生成しシェーダをリンクする関数
function create_program(_gl, _vs, _fs) {
  // プログラムオブジェクトの生成
  var program = _gl.createProgram();

  // プログラムオブジェクトにシェーダを割り当てる
  _gl.attachShader(program, _vs);
  _gl.attachShader(program, _fs);

  // シェーダをリンク
  _gl.linkProgram(program);

  // シェーダのリンクが正しく行なわれたかチェック
  if (_gl.getProgramParameter(program, _gl.LINK_STATUS)) {

    // 成功していたらプログラムオブジェクトを有効にする
    _gl.useProgram(program);

    // プログラムオブジェクトを返して終了
    return program;
  } else {

    // 失敗していたらエラーログをアラートする
    alert(_gl.getProgramInfoLog(program));
  }
}
// VBOを生成する関数
function create_vbo(_gl, _data) {
  // バッファオブジェクトの生成
  var vbo = _gl.createBuffer();

  // バッファをバインドする
  _gl.bindBuffer(_gl.ARRAY_BUFFER, vbo);

  // バッファにデータをセット
  _gl.bufferData(_gl.ARRAY_BUFFER, new Float32Array(_data), _gl.STATIC_DRAW);

  // バッファのバインドを無効化
  _gl.bindBuffer(_gl.ARRAY_BUFFER, null);

  // 生成した VBO を返して終了
  return vbo;
}
// IBOを生成する関数
function create_ibo(_gl, _data) {
  // バッファオブジェクトの生成
  var ibo = _gl.createBuffer();

  // バッファをバインドする
  _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, ibo);

  // バッファにデータをセット
  _gl.bufferData(_gl.ELEMENT_ARRAY_BUFFER, new Int16Array(_data), _gl.STATIC_DRAW);

  // バッファのバインドを無効化
  _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, null);

  // 生成したIBOを返して終了
  return ibo;
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzaGFkZXJUZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBQ0EsSUFBSSxDQUFKLEVBQU0sRUFBTixFQUFTLEVBQVQsRUFBWSxFQUFaLEVBQWUsRUFBZixFQUFrQixFQUFsQixFQUFxQixHQUFyQixFQUF5QixNQUF6QjtBQUNBLElBQUksU0FBSjtBQUNBLElBQUksT0FBSyxHQUFUO0FBQ0EsSUFBSSxXQUFTLEdBQWI7QUFDQSxJQUFJLE1BQUksT0FBSyxFQUFiO0FBQ0EsSUFBSSxjQUFZLEVBQWhCOztBQUVBLE9BQU8sTUFBUCxHQUFjLFlBQVU7QUFDdkIsTUFBRSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBRjtBQUNBLE9BQUcsR0FBSDtBQUNBLE9BQUcsR0FBSDtBQUNBLElBQUUsS0FBRixHQUFRLEVBQVI7QUFDQSxJQUFFLE1BQUYsR0FBUyxFQUFUOztBQUVBLFdBQU8sU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVA7O0FBRUEsSUFBRSxnQkFBRixDQUFtQixXQUFuQixFQUErQixTQUEvQixFQUF5QyxJQUF6QztBQUNBLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBaUMsV0FBakMsRUFBNkMsSUFBN0M7O0FBRUEsT0FBRyxFQUFFLFVBQUYsQ0FBYSxPQUFiLEtBQXVCLEVBQUUsVUFBRixDQUFhLG9CQUFiLENBQTFCOztBQUVBLE1BQUksTUFBSSxlQUFlLEVBQWYsRUFBa0IsY0FBYyxFQUFkLEVBQWlCLElBQWpCLENBQWxCLEVBQXlDLGNBQWMsRUFBZCxFQUFpQixJQUFqQixDQUF6QyxDQUFSO0FBQ0EsUUFBSyxRQUFNLElBQVg7QUFDQSxNQUFHLENBQUMsR0FBSixFQUFRO0FBQ1AsV0FBTyxPQUFQLEdBQWUsS0FBZjtBQUNBO0FBQ0QsY0FBWSxDQUFaLElBQWUsR0FBRyxrQkFBSCxDQUFz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Q0FBb0IsR0FBcEIsRUFBd0IsS0FBeEIsRUFBOEI7QUFDMUI7QUFDQSxNQUFJLE1BQU0sSUFBSSxZQUFKLEVBQVY7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLFlBQW5CLEVBQWlDLEdBQWpDOztBQUVBO0FBQ0EsTUFBSSxVQUFKLENBQWUsSUFBSSxZQUFuQixFQUFpQyxJQUFJLFlBQUosQ0FBaUIsS0FBakIsQ0FBakMsRUFBMEQsSUFBSSxXQUE5RDs7QUFFQTtBQUNBLE1BQUksVUFBSixDQUFlLElBQUksWUFBbkIsRUFBaUMsSUFBakM7O0FBRUE7QUFDQSxTQUFPLEdBQVA7QUFDSDtBQUNEO0FBQ0EsU0FBUyxVQUFULENBQW9CLEdBQXBCLEVBQXdCLEtBQXhCLEVBQThCO0FBQzFCO0FBQ0EsTUFBSSxNQUFNLElBQUksWUFBSixFQUFWOztBQUVBO0FBQ0EsTUFBSSxVQUFKLENBQWUsSUFBSSxvQkFBbkIsRUFBeUMsR0FBekM7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLG9CQUFuQixFQUF5QyxJQUFJLFVBQUosQ0FBZSxLQUFmLENBQXpDLEVBQWdFLElBQUksV0FBcEU7O0FBRUE7QUFDQSxNQUFJLFVBQUosQ0FBZSxJQUFJLG9CQUFuQixFQUF5QyxJQUF6Qzs7QUFFQTtBQUNBLFNBQU8sR0FBUDtBQUNIIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgYyxjdyxjaCxteCxteSxnbCxydW4sZUNoZWNrO1xyXG52YXIgc3RhcnRUaW1lO1xyXG52YXIgdGltZT0wLjA7XHJcbnZhciB0ZW1wVGltZT0wLjA7XHJcbnZhciBmcHM9MTAwMC8zMDtcclxudmFyIHVuaUxvY2F0aW9uPVtdO1xyXG5cclxud2luZG93Lm9ubG9hZD1mdW5jdGlvbigpe1xyXG5cdGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcblx0Y3c9NTEyO1xyXG5cdGNoPTUxMjtcclxuXHRjLndpZHRoPWN3O1xyXG5cdGMuaGVpZ2h0PWNoO1xyXG5cclxuXHRlQ2hlY2s9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGVja1wiKTtcclxuXHJcblx0Yy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbW91c2VNb3ZlLHRydWUpO1xyXG5cdGVDaGVjay5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsY2hlY2tDaGFuZ2UsdHJ1ZSk7XHJcblxyXG5cdGdsPWMuZ2V0Q29udGV4dChcIndlYmdsXCIpfHxjLmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIik7XHJcblxyXG5cdHZhciBwcmc9Y3JlYXRlX3Byb2dyYW0oZ2wsY3JlYXRlX3NoYWRlcihnbCxcInZzXCIpLGNyZWF0ZV9zaGFkZXIoZ2wsXCJmc1wiKSk7XHJcblx0cnVuPShwcmchPT1udWxsKTtcclxuXHRpZighcnVuKXtcclxuXHRcdGVDaGVjay5jaGVja2VkPWZhbHNlO1xyXG5cdH1cclxuXHR1bmlMb2NhdGlvblswXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLFwidGltZVwiKTtcclxuXHR1bmlMb2NhdGlvblsxXT1nbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLFwibW91c2VcIik7XHJcblx0dW5pTG9jYXRpb25bMl09Z2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZyxcImlSZXNvbHV0aW9uXCIpO1xyXG5cclxuXHR2YXIgcG9zaXRpb249W1xyXG5cdC0xLjAsMS4wLDAuMCxcclxuXHQxLjAsMS4wLDAuMCxcclxuXHQtMS4wLC0xLjAsMC4wLFxyXG5cdDEuMCwtMS4wLDAuMCxcclxuXHRdO1xyXG5cdHZhciBpbmRleD1bXHJcblx0MCwyLDEsXHJcblx0MSwyLDNcclxuXHRdO1xyXG5cdHZhciB2UG9zaXRpb249Y3JlYXRlX3ZibyhnbCxwb3NpdGlvbik7XHJcblx0dmFyIHZJbmRleD1jcmVhdGVfaWJvKGdsLGluZGV4KTtcclxuXHR2YXIgdkF0dExvY2F0aW9uPWdsLmdldEF0dHJpYkxvY2F0aW9uKHByZyxcInBvc2l0aW9uXCIpO1xyXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLHZQb3NpdGlvbik7XHJcblx0Z2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodkF0dExvY2F0aW9uKTtcclxuXHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHZBdHRMb2NhdGlvbiwzLGdsLkZMT0FULGZhbHNlLDAsMCk7XHJcblx0Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix2SW5kZXgpO1xyXG5cclxuXHRnbC5jbGVhckNvbG9yKDAuMCwwLjAsMC4wLDEuMCk7XHJcblx0bXg9MC41O215PTAuNTtcclxuXHRzdGFydFRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG5cdHJlbmRlcigpO1xyXG5cclxufTtcclxuZnVuY3Rpb24gcmVuZGVyKCl7XHJcblx0aWYoIXJ1bil7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHRpbWU9KG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lKSowLjAwMTtcclxuXHRnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxuXHJcbi8vXHRjb25zb2xlLmxvZyh0aW1lK3RlbXBUaW1lKTtcclxuXHRnbC51bmlmb3JtMWYodW5pTG9jYXRpb25bMF0sdGltZSt0ZW1wVGltZSk7XHJcblx0Z2wudW5pZm9ybTJmdih1bmlMb2NhdGlvblsxXSxbbXgsbXldKTtcclxuXHRnbC51bmlmb3JtMmZ2KHVuaUxvY2F0aW9uWzJdLFtjdyxjaF0pO1xyXG5cclxuXHRnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLDYsZ2wuVU5TSUdORURfU0hPUlQsMCk7XHJcblx0Z2wuZmx1c2goKTtcclxuXHJcblx0c2V0VGltZW91dChyZW5kZXIsZnBzKTtcclxufVxyXG5mdW5jdGlvbiBjaGVja0NoYW5nZShlKXtcclxuXHRydW49ZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ7XHJcblx0aWYocnVuKXtcclxuXHRcdHN0YXJ0VGltZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdHJlbmRlcigpO1xyXG5cdH1lbHNle1xyXG5cdFx0Y29uc29sZS5sb2coXCJ0aW1lXCIrdGltZSk7XHJcblx0XHRjb25zb2xlLmxvZyhcInRlbXBUaW1lXCIrdGVtcFRpbWUpO1xyXG5cdFx0dGVtcFRpbWUrPXRpbWU7XHJcblx0fVxyXG59XHJcbmZ1bmN0aW9uIG1vdXNlTW92ZShlKXtcclxuXHRteD1lLm9mZnNldFgvY3c7XHJcblx0bXk9ZS5vZmZzZXRZL2NoO1xyXG59XHJcbi8vIOOCt+OCp+ODvOODgOOCkueUn+aIkOOBmeOCi+mWouaVsFxyXG5mdW5jdGlvbiBjcmVhdGVfc2hhZGVyKF9nbCxfaWQpe1xyXG5cdGNvbnNvbGUubG9nKF9nbCk7XHJcbiAgICAvLyDjgrfjgqfjg7zjg4DjgpLmoLzntI3jgZnjgovlpInmlbBcclxuICAgIHZhciBzaGFkZXI7XHJcbiAgICBcclxuICAgIC8vIEhUTUzjgYvjgolzY3JpcHTjgr/jgrDjgbjjga7lj4LnhafjgpLlj5blvpdcclxuICAgIHZhciBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKTtcclxuICAgIFxyXG4gICAgLy8gc2NyaXB044K/44Kw44GM5a2Y5Zyo44GX44Gq44GE5aC05ZCI44Gv5oqc44GR44KLXHJcbiAgICBpZighc2NyaXB0RWxlbWVudCl7cmV0dXJuO31cclxuICAgIFxyXG4gICAgLy8gc2NyaXB044K/44Kw44GudHlwZeWxnuaAp+OCkuODgeOCp+ODg+OCr1xyXG4gICAgc3dpdGNoKHNjcmlwdEVsZW1lbnQudHlwZSl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6aCC54K544K344Kn44O844OA44Gu5aC05ZCIXHJcbiAgICAgICAgY2FzZSAneC1zaGFkZXIveC12ZXJ0ZXgnOlxyXG4gICAgICAgICAgICBzaGFkZXIgPSBfZ2wuY3JlYXRlU2hhZGVyKF9nbC5WRVJURVhfU0hBREVSKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIOODleODqeOCsOODoeODs+ODiOOCt+OCp+ODvOODgOOBruWgtOWQiFxyXG4gICAgICAgIGNhc2UgJ3gtc2hhZGVyL3gtZnJhZ21lbnQnOlxyXG4gICAgICAgICAgICBzaGFkZXIgPSBfZ2wuY3JlYXRlU2hhZGVyKF9nbC5GUkFHTUVOVF9TSEFERVIpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0IDpcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDnlJ/miJDjgZXjgozjgZ/jgrfjgqfjg7zjg4Djgavjgr3jg7zjgrnjgpLlibLjgorlvZPjgabjgotcclxuICAgIF9nbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzY3JpcHRFbGVtZW50LnRleHQpO1xyXG4gICAgXHJcbiAgICAvLyDjgrfjgqfjg7zjg4DjgpLjgrPjg7Pjg5HjgqTjg6vjgZnjgotcclxuICAgIF9nbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICBcclxuICAgIC8vIOOCt+OCp+ODvOODgOOBjOato+OBl+OBj+OCs+ODs+ODkeOCpOODq+OBleOCjOOBn+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgaWYoX2dsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIF9nbC5DT01QSUxFX1NUQVRVUykpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOaIkOWKn+OBl+OBpuOBhOOBn+OCieOCt+OCp+ODvOODgOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBcclxuICAgICAgICAvLyDlpLHmlZfjgZfjgabjgYTjgZ/jgonjgqjjg6njg7zjg63jgrDjgpLjgqLjg6njg7zjg4jjgZnjgotcclxuICAgICAgICBhbGVydChfZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcclxuICAgIH1cclxufVxyXG4vLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLnlJ/miJDjgZfjgrfjgqfjg7zjg4DjgpLjg6rjg7Pjgq/jgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX3Byb2dyYW0oX2dsLF92cywgX2ZzKXtcclxuICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgdmFyIHByb2dyYW0gPSBfZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgXHJcbiAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgavjgrfjgqfjg7zjg4DjgpLlibLjgorlvZPjgabjgotcclxuICAgIF9nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgX3ZzKTtcclxuICAgIF9nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgX2ZzKTtcclxuICAgIFxyXG4gICAgLy8g44K344Kn44O844OA44KS44Oq44Oz44KvXHJcbiAgICBfZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICBcclxuICAgIC8vIOOCt+OCp+ODvOODgOOBruODquODs+OCr+OBjOato+OBl+OBj+ihjOOBquOCj+OCjOOBn+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgaWYoX2dsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgX2dsLkxJTktfU1RBVFVTKSl7XHJcbiAgICBcclxuICAgICAgICAvLyDmiJDlip/jgZfjgabjgYTjgZ/jgonjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLmnInlirnjgavjgZnjgotcclxuICAgICAgICBfZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZfjgabntYLkuoZcclxuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWkseaVl+OBl+OBpuOBhOOBn+OCieOCqOODqeODvOODreOCsOOCkuOCouODqeODvOODiOOBmeOCi1xyXG4gICAgICAgIGFsZXJ0KF9nbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XHJcbiAgICB9XHJcbn1cclxuLy8gVkJP44KS55Sf5oiQ44GZ44KL6Zai5pWwXHJcbmZ1bmN0aW9uIGNyZWF0ZV92Ym8oX2dsLF9kYXRhKXtcclxuICAgIC8vIOODkOODg+ODleOCoeOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgdmFyIHZibyA9IF9nbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44KS44OQ44Kk44Oz44OJ44GZ44KLXHJcbiAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLCB2Ym8pO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgavjg4fjg7zjgr/jgpLjgrvjg4Pjg4hcclxuICAgIF9nbC5idWZmZXJEYXRhKF9nbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoX2RhdGEpLCBfZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjga7jg5DjgqTjg7Pjg4njgpLnhKHlirnljJZcclxuICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgXHJcbiAgICAvLyDnlJ/miJDjgZfjgZ8gVkJPIOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgcmV0dXJuIHZibztcclxufVxyXG4vLyBJQk/jgpLnlJ/miJDjgZnjgovplqLmlbBcclxuZnVuY3Rpb24gY3JlYXRlX2libyhfZ2wsX2RhdGEpe1xyXG4gICAgLy8g44OQ44OD44OV44Kh44Kq44OW44K444Kn44Kv44OI44Gu55Sf5oiQXHJcbiAgICB2YXIgaWJvID0gX2dsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgXHJcbiAgICAvLyDjg5Djg4Pjg5XjgqHjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaWJvKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44Gr44OH44O844K/44KS44K744OD44OIXHJcbiAgICBfZ2wuYnVmZmVyRGF0YShfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBJbnQxNkFycmF5KF9kYXRhKSwgX2dsLlNUQVRJQ19EUkFXKTtcclxuICAgIFxyXG4gICAgLy8g44OQ44OD44OV44Kh44Gu44OQ44Kk44Oz44OJ44KS54Sh5Yq55YyWXHJcbiAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgXHJcbiAgICAvLyDnlJ/miJDjgZfjgZ9JQk/jgpLov5TjgZfjgabntYLkuoZcclxuICAgIHJldHVybiBpYm87XHJcbn1cclxuIl19
