(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.onload = function () {
	var socket = io();
	var canvas = document.getElementById("myCanvas");
	var c = canvas.getContext("2d");
	/*
 	var w=640;
 	var h=640;
 */
	var w = 316;
	var h = 316;
	var drawing = false;
	var oldPos;

	canvas.width = w;
	canvas.height = h;

	//背景は白になる
	c.fillStyle = "rgb(255,255,255)";
	c.fillRect(0, 0, $(canvas).width(), $(canvas).height());

	c.strokeStyle = "black";
	c.lineWidth = 5;
	c.lineJoin = "round";
	c.lineCap = "round";

	//タップ開始時に、絵を描く準備をする
	canvas.addEventListener("touchstart", function (e) {
		drawing = true;
		oldPos = getPosT(e);
	}, false);

	//タップ終了時に、絵を描く後処理を行う
	canvas.addEventListener("touched", function () {
		drawing = false;
	}, false);

	//gestureイベント（2本指以上触ると発生する）
	//終了時にも絵を描く後処理を行う
	canvas.addEventListener("gestureend", function () {
		console.log("mouseout");
		drawing = false;
	}, false);

	//実際に絵を書く処理
	//前回保存した位置から現在の位置に線を引く
	canvas.addEventListener("touchmove", function (e) {
		var pos = getPosT(e);
		if (drawing) {
			c.beginPath();
			c.moveTo(oldPos.x, oldPos.y);
			c.lineTo(pos.x, pos.y);
			c.stroke();
			c.closePath();
			oldPos = pos;
		}
	}, false);

	//タップ関連関数
	function scrollX() {
		return document.documentElement.scrollLeft || document.body.scrollLeft;
	}
	function scrollY() {
		return document.documentElement.scrollTop || document.body.scrollTop;
	}
	function getPosT(_e) {
		var mouseX = _e.touches[0].clientX - $(canvas).position().left + scrollX();
		var mouseY = _e.touches[0].clientY - $(canvas).position().top + scrollY();
		return { x: mouseX, y: mouseY };
	}

	//色と線の太さを設定する関数
	Color("black");
	Color("blue");
	Color("red");
	Color("green");
	/*
 $("#small").on("touchend",function(){
 	console.log("small_jquery");
 });
 */
	lineStrokeWidth("small");
	lineStrokeWidth("middle");
	lineStrokeWidth("large");

	document.getElementById("delete_button").addEventListener("click", function () {
		//背景は白になる
		c.fillStyle = "rgb(255,255,255)";
		c.fillRect(0, 0, $(canvas).width(), $(canvas).height());
		//c.clearRect(0,0,$(canvas).width(),$(canvas).height());		
	}, false);

	function Color(id) {
		console.log(id);
		document.getElementById(id).addEventListener("click", function () {
			console.log(id);
			c.strokeStyle = id;
		}, false);
	}

	function lineStrokeWidth(id) {
		document.getElementById(id).addEventListener("touchend", function () {
			console.log(id + "_touchend");
			var strokewidth;
			switch (id) {
				case "small":
					strokewidth = 5;
					break;
				case "middle":
					strokewidth = 10;
					break;
				case "large":
					strokewidth = 20;
					break;
				default:
					break;
			}
			console.log(strokewidth);
			c.lineWidth = strokewidth;
		}, false);

		document.getElementById(id).addEventListener("click", function () {
			console.log(id + "_click");
			var strokewidth;
			switch (id) {
				case "small":
					strokewidth = 5;
					break;
				case "middle":
					strokewidth = 10;
					break;
				case "large":
					strokewidth = 20;
					break;
				default:
					break;
			}
			console.log(strokewidth);
			c.lineWidth = strokewidth;
		}, false);
	}

	//クリックされたかの確認
	var a = function a() {
		console.log("clickきたよ");
	};

	//ブラウザのデフォルト動作を禁止する
	function stopDefault(e) {
		//if(e.touches[0].target.tagName.toLowerCase()=="li"){
		//console.log(e.touches[0].target);
		if (e.touches[0].target.tagName.toLowerCase() == "li") {
			//console.log(e.touches[0].target.tagName.toLowerCase());
			return;
		}
		if (e.touches[0].target.tagName.toLowerCase() == "input") {
			return;
		}
		e.preventDefault();
	}

	//ドキュメントのタッチイベントの初期化
	document.addEventListener("touchstart", stopDefault, false);
	document.addEventListener("touchmove", stopDefault, false);
	//document.addEventListener("touchend",stopDefault,false);
	//ドキュメントのジェスチャーイベントの初期化
	document.addEventListener("gesturestart", stopDefault, false);
	document.addEventListener("gesturechange", stopDefault, false);
	//document.addEventListener("gestureend",stopDefault,false);


	//画像変換する処理
	var toImage = document.getElementById("toImage_button");
	toImage.addEventListener("click", function () {
		var data = canvas.toDataURL("image/jpeg");
		var imageContents = document.getElementById("imageContents");
		imageContents.innerHTML = "<img src='" + data + "'>";
		socket.emit("pushImageFromClient", data);
	}, false);
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzbWFydHBob25lUGFpbnRBcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sTUFBUCxHQUFjLFlBQVU7QUFDdkIsS0FBSSxTQUFPLElBQVg7QUFDQSxLQUFJLFNBQU8sU0FBUyxjQUFULENBQXdCLFVBQXhCLENBQVg7QUFDQSxLQUFJLElBQUUsT0FBTyxVQUFQLENBQWtCLElBQWxCLENBQU47QUFDRDs7OztBQUlDLEtBQUksSUFBRSxHQUFOO0FBQ0EsS0FBSSxJQUFFLEdBQU47QUFDQSxLQUFJLFVBQVEsS0FBWjtBQUNBLEtBQUksTUFBSjs7QUFFQSxRQUFPLEtBQVAsR0FBYSxDQUFiO0FBQ0EsUUFBTyxNQUFQLEdBQWMsQ0FBZDs7QUFFQTtBQUNBLEdBQUUsU0FBRixHQUFZLGtCQUFaO0FBQ0EsR0FBRSxRQUFGLENBQVcsQ0FBWCxFQUFhLENBQWIsRUFBZSxFQUFFLE1BQUYsRUFBVSxLQUFWLEVBQWYsRUFBaUMsRUFBRSxNQUFGLEVBQVUsTUFBVixFQUFqQzs7QUFFQSxHQUFFLFdBQUYsR0FBYyxPQUFkO0FBQ0EsR0FBRSxTQUFGLEdBQVksQ0FBWjtBQUNBLEdBQUUsUUFBRixHQUFXLE9BQVg7QUFDQSxHQUFFLE9BQUYsR0FBVSxPQUFWOztBQUVBO0FBQ0EsUUFBTyxnQkFBUCxDQUF3QixZQUF4QixFQUFxQyxVQUFTLENBQVQsRUFBVztBQUMvQyxZQUFRLElBQVI7QUFDQSxXQUFPLFFBQVEsQ0FBUixDQUFQO0FBQ0EsRUFIRCxFQUdFLEtBSEY7O0FBS0E7QUFDQSxRQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQWtDLFlBQVU7QUFDM0MsWUFBUSxLQUFSO0FBQ0EsRUFGRCxFQUVFLEtBRkY7O0FBSUE7QUFDQTtBQUNBLFFBQU8sZ0JBQVAsQ0FBd0IsWUFBeEIsRUFBcUMsWUFBVTtBQUM5QyxV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LENBQWlCLFlBQWpCLENBQVQ7QUFDQSxNQUFJLGdCQUFjLFNBQVMsY0FBVCxDQUF3QixlQUF4QixDQUFsQjtBQUNBLGdCQUFjLFNBQWQsR0FBd0IsZUFBYSxJQUFiLEdBQWtCLElBQTFDO0FBQ0EsU0FBTyxJQUFQLENBQVkscUJBQVosRUFBa0MsSUFBbEM7QUFDQSxFQUxELEVBS0UsS0FMRjtBQU9BLENBakxEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIndpbmRvdy5vbmxvYWQ9ZnVuY3Rpb24oKXtcclxuXHR2YXIgc29ja2V0PWlvKCk7XHJcblx0dmFyIGNhbnZhcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15Q2FudmFzXCIpO1xyXG5cdHZhciBjPWNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbi8qXHJcblx0dmFyIHc9NjQwO1xyXG5cdHZhciBoPTY0MDtcclxuKi9cclxuXHR2YXIgdz0zMTY7XHJcblx0dmFyIGg9MzE2O1xyXG5cdHZhciBkcmF3aW5nPWZhbHNlO1xyXG5cdHZhciBvbGRQb3M7XHJcblxyXG5cdGNhbnZhcy53aWR0aD13O1xyXG5cdGNhbnZhcy5oZWlnaHQ9aDtcclxuXHJcblx0Ly/og4zmma/jga/nmb3jgavjgarjgotcclxuXHRjLmZpbGxTdHlsZT1cInJnYigyNTUsMjU1LDI1NSlcIjtcclxuXHRjLmZpbGxSZWN0KDAsMCwkKGNhbnZhcykud2lkdGgoKSwkKGNhbnZhcykuaGVpZ2h0KCkpO1xyXG5cclxuXHRjLnN0cm9rZVN0eWxlPVwiYmxhY2tcIjtcclxuXHRjLmxpbmVXaWR0aD01O1xyXG5cdGMubGluZUpvaW49XCJyb3VuZFwiO1xyXG5cdGMubGluZUNhcD1cInJvdW5kXCI7XHJcblxyXG5cdC8v44K/44OD44OX6ZaL5aeL5pmC44Gr44CB57W144KS5o+P44GP5rqW5YKZ44KS44GZ44KLXHJcblx0Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oZSl7XHJcblx0XHRkcmF3aW5nPXRydWU7XHJcblx0XHRvbGRQb3M9Z2V0UG9zVChlKTtcclxuXHR9LGZhbHNlKTtcclxuXHJcblx0Ly/jgr/jg4Pjg5fntYLkuobmmYLjgavjgIHntbXjgpLmj4/jgY/lvozlh6bnkIbjgpLooYzjgYZcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZWRcIixmdW5jdGlvbigpe1xyXG5cdFx0ZHJhd2luZz1mYWxzZVxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL2dlc3R1cmXjgqTjg5njg7Pjg4jvvIgy5pys5oyH5Lul5LiK6Kem44KL44Go55m655Sf44GZ44KL77yJXHJcblx0Ly/ntYLkuobmmYLjgavjgoLntbXjgpLmj4/jgY/lvozlh6bnkIbjgpLooYzjgYZcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVlbmRcIixmdW5jdGlvbigpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJtb3VzZW91dFwiKTtcclxuXHRcdGRyYXdpbmc9ZmFsc2U7XHJcblx0fSxmYWxzZSk7XHJcblxyXG5cdC8v5a6f6Zqb44Gr57W144KS5pu444GP5Yem55CGXHJcblx0Ly/liY3lm57kv53lrZjjgZfjgZ/kvY3nva7jgYvjgonnj77lnKjjga7kvY3nva7jgavnt5rjgpLlvJXjgY9cclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe1xyXG5cdHZhciBwb3MgPSBnZXRQb3NUKGUpO1xyXG5cdFx0aWYoZHJhd2luZyl7XHJcblx0XHRcdGMuYmVnaW5QYXRoKCk7XHJcblx0XHRcdGMubW92ZVRvKG9sZFBvcy54LG9sZFBvcy55KTtcclxuXHRcdFx0Yy5saW5lVG8ocG9zLngscG9zLnkpO1xyXG5cdFx0XHRjLnN0cm9rZSgpO1xyXG5cdFx0XHRjLmNsb3NlUGF0aCgpO1xyXG5cdFx0XHRvbGRQb3M9cG9zO1xyXG5cdFx0fVxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL+OCv+ODg+ODl+mWoumAo+mWouaVsFxyXG5cdGZ1bmN0aW9uIHNjcm9sbFgoKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDt9XHJcblx0ZnVuY3Rpb24gc2Nyb2xsWSgpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt9XHJcblx0ZnVuY3Rpb24gZ2V0UG9zVChfZSl7XHJcblx0XHR2YXIgbW91c2VYPV9lLnRvdWNoZXNbMF0uY2xpZW50WC0kKGNhbnZhcykucG9zaXRpb24oKS5sZWZ0K3Njcm9sbFgoKTtcclxuXHRcdHZhciBtb3VzZVk9X2UudG91Y2hlc1swXS5jbGllbnRZLSQoY2FudmFzKS5wb3NpdGlvbigpLnRvcCtzY3JvbGxZKCk7XHJcblx0XHRyZXR1cm4ge3g6bW91c2VYLHk6bW91c2VZfTtcclxuXHR9XHJcblxyXG5cdC8v6Imy44Go57ea44Gu5aSq44GV44KS6Kit5a6a44GZ44KL6Zai5pWwXHJcblx0Q29sb3IoXCJibGFja1wiKTtcclxuXHRDb2xvcihcImJsdWVcIik7XHJcblx0Q29sb3IoXCJyZWRcIik7XHJcblx0Q29sb3IoXCJncmVlblwiKTtcclxuXHQvKlxyXG5cdCQoXCIjc21hbGxcIikub24oXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRjb25zb2xlLmxvZyhcInNtYWxsX2pxdWVyeVwiKTtcclxuXHR9KTtcclxuKi9cclxuXHRsaW5lU3Ryb2tlV2lkdGgoXCJzbWFsbFwiKTtcclxuXHRsaW5lU3Ryb2tlV2lkdGgoXCJtaWRkbGVcIik7XHJcblx0bGluZVN0cm9rZVdpZHRoKFwibGFyZ2VcIik7XHJcblxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlX2J1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0Ly/og4zmma/jga/nmb3jgavjgarjgotcclxuXHRcdGMuZmlsbFN0eWxlPVwicmdiKDI1NSwyNTUsMjU1KVwiO1xyXG5cdFx0Yy5maWxsUmVjdCgwLDAsJChjYW52YXMpLndpZHRoKCksJChjYW52YXMpLmhlaWdodCgpKTtcclxuXHRcdC8vYy5jbGVhclJlY3QoMCwwLCQoY2FudmFzKS53aWR0aCgpLCQoY2FudmFzKS5oZWlnaHQoKSk7XHRcdFxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHRmdW5jdGlvbiBDb2xvcihpZCl7XHJcblx0XHRjb25zb2xlLmxvZyhpZCk7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdFx0Y29uc29sZS5sb2coaWQpO1xyXG5cdFx0XHRjLnN0cm9rZVN0eWxlPWlkO1xyXG5cdFx0fSxmYWxzZSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBsaW5lU3Ryb2tlV2lkdGgoaWQpe1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNvbnNvbGUubG9nKGlkK1wiX3RvdWNoZW5kXCIpO1xyXG5cdFx0XHR2YXIgc3Ryb2tld2lkdGg7XHJcblx0XHRcdHN3aXRjaChpZCl7XHJcblx0XHRcdFx0Y2FzZSBcInNtYWxsXCI6XHJcblx0XHRcdFx0XHRzdHJva2V3aWR0aD01O1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIm1pZGRsZVwiOlxyXG5cdFx0XHRcdFx0c3Ryb2tld2lkdGg9MTA7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIFwibGFyZ2VcIjpcclxuXHRcdFx0XHRcdHN0cm9rZXdpZHRoPTIwO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnNvbGUubG9nKHN0cm9rZXdpZHRoKTtcclxuXHRcdFx0Yy5saW5lV2lkdGg9c3Ryb2tld2lkdGg7XHJcblx0XHR9LGZhbHNlKTtcclxuXHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdFx0Y29uc29sZS5sb2coaWQrXCJfY2xpY2tcIik7XHJcblx0XHRcdHZhciBzdHJva2V3aWR0aDtcclxuXHRcdFx0c3dpdGNoKGlkKXtcclxuXHRcdFx0XHRjYXNlIFwic21hbGxcIjpcclxuXHRcdFx0XHRcdHN0cm9rZXdpZHRoPTU7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIFwibWlkZGxlXCI6XHJcblx0XHRcdFx0XHRzdHJva2V3aWR0aD0xMDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJsYXJnZVwiOlxyXG5cdFx0XHRcdFx0c3Ryb2tld2lkdGg9MjA7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc29sZS5sb2coc3Ryb2tld2lkdGgpO1xyXG5cdFx0XHRjLmxpbmVXaWR0aD1zdHJva2V3aWR0aDtcclxuXHRcdH0sZmFsc2UpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8v44Kv44Oq44OD44Kv44GV44KM44Gf44GL44Gu56K66KqNXHJcblx0dmFyIGE9ZnVuY3Rpb24oKXtcclxuXHRcdGNvbnNvbGUubG9nKFwiY2xpY2vjgY3jgZ/jgohcIik7XHJcblx0fVxyXG5cclxuXHQvL+ODluODqeOCpuOCtuOBruODh+ODleOCqeODq+ODiOWLleS9nOOCkuemgeatouOBmeOCi1xyXG5cdGZ1bmN0aW9uIHN0b3BEZWZhdWx0KGUpe1xyXG5cdFx0Ly9pZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJsaVwiKXtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhlLnRvdWNoZXNbMF0udGFyZ2V0KTtcclxuXHRcdGlmKGUudG91Y2hlc1swXS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwibGlcIil7XHJcblx0XHRcdC8vY29uc29sZS5sb2coZS50b3VjaGVzWzBdLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJpbnB1dFwiKXtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxuXHJcblxyXG5cdC8v44OJ44Kt44Ol44Oh44Oz44OI44Gu44K/44OD44OB44Kk44OZ44Oz44OI44Gu5Yid5pyf5YyWXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHQvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHQvL+ODieOCreODpeODoeODs+ODiOOBruOCuOOCp+OCueODgeODo+ODvOOCpOODmeODs+ODiOOBruWIneacn+WMllxyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlc3RhcnRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVjaGFuZ2VcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0Ly9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWVuZFwiLHN0b3BEZWZhdWx0LGZhbHNlKTtcclxuXHJcblxyXG5cdC8v55S75YOP5aSJ5o+b44GZ44KL5Yem55CGXHJcblx0dmFyIHRvSW1hZ2U9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b0ltYWdlX2J1dHRvblwiKTtcclxuXHR0b0ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgZGF0YT1jYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiKTtcclxuXHRcdHZhciBpbWFnZUNvbnRlbnRzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VDb250ZW50c1wiKTtcclxuXHRcdGltYWdlQ29udGVudHMuaW5uZXJIVE1MPVwiPGltZyBzcmM9J1wiK2RhdGErXCInPlwiO1xyXG5cdFx0c29ja2V0LmVtaXQoXCJwdXNoSW1hZ2VGcm9tQ2xpZW50XCIsZGF0YSk7XHJcblx0fSxmYWxzZSk7XHJcblxyXG59Il19
