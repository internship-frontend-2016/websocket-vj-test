(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

window.onload = function () {
	var socket = io();
	var canvas = document.getElementById("myCanvas");
	var c = canvas.getContext("2d");

	var w = 316;
	var h = 316;
	var drawing = false;
	var oldPos;

	canvas.width = w;
	canvas.height = h;

	//背景は白になる
	c.fillStyle = "rgb(255,255,255)";
	c.fillRect(0, 0, $(canvas).width(), $(canvas).height());

	c.strokeStyle = "black";
	c.lineWidth = 5;
	c.lineJoin = "round";
	c.lineCap = "round";

	//タップ開始時に、絵を描く準備をする
	canvas.addEventListener("touchstart", function (e) {
		drawing = true;
		oldPos = getPosT(e, canvas);
	}, false);

	//タップ終了時に、絵を描く後処理を行う
	canvas.addEventListener("touched", function () {
		drawing = false;
	}, false);

	//gestureイベント（2本指以上触ると発生する）
	//終了時にも絵を描く後処理を行う
	canvas.addEventListener("gestureend", function () {
		console.log("mouseout");
		drawing = false;
	}, false);

	//実際に絵を書く処理
	//前回保存した位置から現在の位置に線を引く
	canvas.addEventListener("touchmove", function (e) {
		var pos = getPosT(e, canvas);
		if (drawing) {
			c.beginPath();
			c.moveTo(oldPos.x, oldPos.y);
			c.lineTo(pos.x, pos.y);
			c.stroke();
			c.closePath();
			oldPos = pos;
		}
	}, false);
	//色と線の太さを設定する
	Color("black", c);
	Color("blue", c);
	Color("red", c);
	Color("green", c);

	lineStrokeWidth("small", c);
	lineStrokeWidth("middle", c);
	lineStrokeWidth("large", c);

	document.getElementById("delete_button").addEventListener("click", function () {
		//背景は白になる
		c.fillStyle = "rgb(255,255,255)";
		c.fillRect(0, 0, $(canvas).width(), $(canvas).height());
		//c.clearRect(0,0,$(canvas).width(),$(canvas).height());		
	}, false);

	//ドキュメントのタッチイベントの初期化
	document.addEventListener("touchstart", stopDefault, false);
	document.addEventListener("touchmove", stopDefault, false);
	//document.addEventListener("touchend",stopDefault,false);
	//ドキュメントのジェスチャーイベントの初期化
	document.addEventListener("gesturestart", stopDefault, false);
	document.addEventListener("gesturechange", stopDefault, false);
	//document.addEventListener("gestureend",stopDefault,false);


	//画像変換する処理
	var toImage = document.getElementById("toImage_button");
	toImage.addEventListener("click", function () {
		var data = canvas.toDataURL("image/jpeg");
		var imageContents = document.getElementById("imageContents");
		imageContents.innerHTML = "<img src='" + data + "'>";
		socket.emit("pushImageFromClient", data);
	}, false);
};

//タップ関連関数
function scrollX() {
	return document.documentElement.scrollLeft || document.body.scrollLeft;
}
function scrollY() {
	return document.documentElement.scrollTop || document.body.scrollTop;
}
function getPosT(_e, _canvas) {
	var mouseX = _e.touches[0].clientX - $(_canvas).position().left + scrollX();
	var mouseY = _e.touches[0].clientY - $(_canvas).position().top + scrollY();
	return { x: mouseX, y: mouseY };
}
function Color(_id, _c) {
	console.log(_id);
	document.getElementById(_id).addEventListener("click", function () {
		console.log(_id);
		_c.strokeStyle = _id;
	}, false);
}

function lineStrokeWidth(_id, _c) {
	document.getElementById(_id).addEventListener("touchend", function () {
		console.log(_id + "_touchend");
		var strokewidth;
		switch (_id) {
			case "small":
				strokewidth = 5;
				break;
			case "middle":
				strokewidth = 10;
				break;
			case "large":
				strokewidth = 20;
				break;
			default:
				break;
		}
		console.log(strokewidth);
		_c.lineWidth = strokewidth;
	}, false);

	document.getElementById(_id).addEventListener("click", function () {
		console.log(_id + "_click");
		var strokewidth;
		switch (_id) {
			case "small":
				strokewidth = 5;
				break;
			case "middle":
				strokewidth = 10;
				break;
			case "large":
				strokewidth = 20;
				break;
			default:
				break;
		}
		console.log(strokewidth);
		_c.lineWidth = strokewidth;
	}, false);
}

//ブラウザのデフォルト動作を禁止する
function stopDefault(e) {
	//if(e.touches[0].target.tagName.toLowerCase()=="li"){
	//console.log(e.touches[0].target);
	if (e.touches[0].target.tagName.toLowerCase() == "li") {
		//console.log(e.touches[0].target.tagName.toLowerCase());
		return;
	}
	if (e.touches[0].target.tagName.toLowerCase() == "input") {
		return;
	}
	e.preventDefault();
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxzbWFydHBob25lUGFpbnRBcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sTUFBUCxHQUFjLFlBQVU7QUFDdkIsS0FBSSxTQUFPLElBQVg7QUFDQSxLQUFJLFNBQU8sU0FBUyxjQUFULENBQXdCLFVBQXhCLENBQVg7QUFDQSxLQUFJLElBQUUsT0FBTyxVQUFQLENBQWtCLElBQWxCLENBQU47O0FBRUEsS0FBSSxJQUFFLEdBQU47QUFDQSxLQUFJLElBQUUsR0FBTjtBQUNBLEtBQUksVUFBUSxLQUFaO0FBQ0EsS0FBSSxNQUFKOztBQUVBLFFBQU8sS0FBUCxHQUFhLENBQWI7QUFDQSxRQUFPLE1BQVAsR0FBYyxDQUFkOztBQUVBO0FBQ0EsR0FBRSxTQUFGLEdBQVksa0JBQVo7QUFDQSxHQUFFLFFBQUYsQ0FBVyxDQUFYLEVBQWEsQ0FBYixFQUFlLEVBQUUsTUFBRixFQUFVLEtBQVYsRUFBZixFQUFpQyxFQUFFLE1BQUYsRUFBVSxNQUFWLEVBQWpDOztBQUVBLEdBQUUsV0FBRixHQUFjLE9BQWQ7QUFDQSxHQUFFLFNBQUYsR0FBWSxDQUFaO0FBQ0EsR0FBRSxRQUFGLEdBQVcsT0FBWDtBQUNBLEdBQUUsT0FBRixHQUFVLE9BQVY7O0FBRUE7QUFDQSxRQUFPLGdCQUFQLENBQXdCLFlBQXhCLEVBQXFDLFVBQVMsQ0FBVCxFQUFXO0FBQy9DLFlBQVEsSUFBUjtBQUNBLFdBQU8sUUFBUSxDQUFSLEVBQVUsTUFBVixDQUFQO0FBQ0EsRUFIRCxFQUdFLEtBSEY7O0FBS0E7QUFDQSxRQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQWtDLFlBQVU7QUFDM0MsWUFBUSxLQUFSO0FBQ0EsRUFGRCxFQUVFLEtBRkY7O0FBSUE7QUFDQTtBQUNBLFFBQU8sZ0JBQVAsQ0FBd0IsWUFBeEIsRUFBcUMsWUFBVTtBQUM5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QUFDdEI7QUFDQztBQUNELEtBQUcsRUFBRSxPQUFGLENBQVUsQ0FBVixFQUFhLE1BQWIsQ0FBb0IsT0FBcEIsQ0FBNEIsV0FBNUIsTUFBNkMsSUFBaEQsRUFBcUQ7QUFDcEQ7QUFDQTtBQUNBO0FBQ0QsS0FBRyxFQUFFLE9BQUYsQ0FBVSxDQUFWLEVBQWEsTUFBYixDQUFvQixPQUFwQixDQUE0QixXQUE1QixNQUEyQyxPQUE5QyxFQUFzRDtBQUNyRDtBQUNBO0FBQ0QsR0FBRSxjQUFGO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwid2luZG93Lm9ubG9hZD1mdW5jdGlvbigpe1xyXG5cdHZhciBzb2NrZXQ9aW8oKTtcclxuXHR2YXIgY2FudmFzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlDYW52YXNcIik7XHJcblx0dmFyIGM9Y2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcblx0dmFyIHc9MzE2O1xyXG5cdHZhciBoPTMxNjtcclxuXHR2YXIgZHJhd2luZz1mYWxzZTtcclxuXHR2YXIgb2xkUG9zO1xyXG5cclxuXHRjYW52YXMud2lkdGg9dztcclxuXHRjYW52YXMuaGVpZ2h0PWg7XHJcblxyXG5cdC8v6IOM5pmv44Gv55m944Gr44Gq44KLXHJcblx0Yy5maWxsU3R5bGU9XCJyZ2IoMjU1LDI1NSwyNTUpXCI7XHJcblx0Yy5maWxsUmVjdCgwLDAsJChjYW52YXMpLndpZHRoKCksJChjYW52YXMpLmhlaWdodCgpKTtcclxuXHJcblx0Yy5zdHJva2VTdHlsZT1cImJsYWNrXCI7XHJcblx0Yy5saW5lV2lkdGg9NTtcclxuXHRjLmxpbmVKb2luPVwicm91bmRcIjtcclxuXHRjLmxpbmVDYXA9XCJyb3VuZFwiO1xyXG5cclxuXHQvL+OCv+ODg+ODl+mWi+Wni+aZguOBq+OAgee1teOCkuaPj+OBj+a6luWCmeOCkuOBmeOCi1xyXG5cdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0ZHJhd2luZz10cnVlO1xyXG5cdFx0b2xkUG9zPWdldFBvc1QoZSxjYW52YXMpO1xyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL+OCv+ODg+ODl+e1guS6huaZguOBq+OAgee1teOCkuaPj+OBj+W+jOWHpueQhuOCkuihjOOBhlxyXG5cdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlZFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRkcmF3aW5nPWZhbHNlXHJcblx0fSxmYWxzZSk7XHJcblxyXG5cdC8vZ2VzdHVyZeOCpOODmeODs+ODiO+8iDLmnKzmjIfku6XkuIrop6bjgovjgajnmbrnlJ/jgZnjgovvvIlcclxuXHQvL+e1guS6huaZguOBq+OCgue1teOCkuaPj+OBj+W+jOWHpueQhuOCkuihjOOBhlxyXG5cdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWVuZFwiLGZ1bmN0aW9uKCl7XHJcblx0XHRjb25zb2xlLmxvZyhcIm1vdXNlb3V0XCIpO1xyXG5cdFx0ZHJhd2luZz1mYWxzZTtcclxuXHR9LGZhbHNlKTtcclxuXHJcblx0Ly/lrp/pmpvjgavntbXjgpLmm7jjgY/lh6bnkIZcclxuXHQvL+WJjeWbnuS/neWtmOOBl+OBn+S9jee9ruOBi+OCieePvuWcqOOBruS9jee9ruOBq+e3muOCkuW8leOBj1xyXG5cdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oZSl7XHJcblx0dmFyIHBvcyA9IGdldFBvc1QoZSxjYW52YXMpO1xyXG5cdFx0aWYoZHJhd2luZyl7XHJcblx0XHRcdGMuYmVnaW5QYXRoKCk7XHJcblx0XHRcdGMubW92ZVRvKG9sZFBvcy54LG9sZFBvcy55KTtcclxuXHRcdFx0Yy5saW5lVG8ocG9zLngscG9zLnkpO1xyXG5cdFx0XHRjLnN0cm9rZSgpO1xyXG5cdFx0XHRjLmNsb3NlUGF0aCgpO1xyXG5cdFx0XHRvbGRQb3M9cG9zO1xyXG5cdFx0fVxyXG5cdH0sZmFsc2UpO1xyXG5cdC8v6Imy44Go57ea44Gu5aSq44GV44KS6Kit5a6a44GZ44KLXHJcblx0Q29sb3IoXCJibGFja1wiLGMpO1xyXG5cdENvbG9yKFwiYmx1ZVwiLGMpO1xyXG5cdENvbG9yKFwicmVkXCIsYyk7XHJcblx0Q29sb3IoXCJncmVlblwiLGMpO1xyXG5cclxuXHRsaW5lU3Ryb2tlV2lkdGgoXCJzbWFsbFwiLGMpO1xyXG5cdGxpbmVTdHJva2VXaWR0aChcIm1pZGRsZVwiLGMpO1xyXG5cdGxpbmVTdHJva2VXaWR0aChcImxhcmdlXCIsYyk7XHJcblxyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlX2J1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0Ly/og4zmma/jga/nmb3jgavjgarjgotcclxuXHRcdGMuZmlsbFN0eWxlPVwicmdiKDI1NSwyNTUsMjU1KVwiO1xyXG5cdFx0Yy5maWxsUmVjdCgwLDAsJChjYW52YXMpLndpZHRoKCksJChjYW52YXMpLmhlaWdodCgpKTtcclxuXHRcdC8vYy5jbGVhclJlY3QoMCwwLCQoY2FudmFzKS53aWR0aCgpLCQoY2FudmFzKS5oZWlnaHQoKSk7XHRcdFxyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHQvL+ODieOCreODpeODoeODs+ODiOOBruOCv+ODg+ODgeOCpOODmeODs+ODiOOBruWIneacn+WMllxyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0Ly9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblx0Ly/jg4njgq3jg6Xjg6Hjg7Pjg4jjga7jgrjjgqfjgrnjg4Hjg6Pjg7zjgqTjg5njg7Pjg4jjga7liJ3mnJ/ljJZcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZXN0YXJ0XCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlY2hhbmdlXCIsc3RvcERlZmF1bHQsZmFsc2UpO1xyXG5cdC8vZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVlbmRcIixzdG9wRGVmYXVsdCxmYWxzZSk7XHJcblxyXG5cclxuXHQvL+eUu+WDj+WkieaPm+OBmeOCi+WHpueQhlxyXG5cdHZhciB0b0ltYWdlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9JbWFnZV9idXR0b25cIik7XHJcblx0dG9JbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe1xyXG5cdFx0dmFyIGRhdGE9Y2FudmFzLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIik7XHJcblx0XHR2YXIgaW1hZ2VDb250ZW50cz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlQ29udGVudHNcIik7XHJcblx0XHRpbWFnZUNvbnRlbnRzLmlubmVySFRNTD1cIjxpbWcgc3JjPSdcIitkYXRhK1wiJz5cIjtcclxuXHRcdHNvY2tldC5lbWl0KFwicHVzaEltYWdlRnJvbUNsaWVudFwiLGRhdGEpO1xyXG5cdH0sZmFsc2UpO1xyXG59XHJcblxyXG4vL+OCv+ODg+ODl+mWoumAo+mWouaVsFxyXG5mdW5jdGlvbiBzY3JvbGxYKCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7fVxyXG5mdW5jdGlvbiBzY3JvbGxZKCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO31cclxuZnVuY3Rpb24gZ2V0UG9zVChfZSxfY2FudmFzKXtcclxuXHR2YXIgbW91c2VYPV9lLnRvdWNoZXNbMF0uY2xpZW50WC0kKF9jYW52YXMpLnBvc2l0aW9uKCkubGVmdCtzY3JvbGxYKCk7XHJcblx0dmFyIG1vdXNlWT1fZS50b3VjaGVzWzBdLmNsaWVudFktJChfY2FudmFzKS5wb3NpdGlvbigpLnRvcCtzY3JvbGxZKCk7XHJcblx0cmV0dXJuIHt4Om1vdXNlWCx5Om1vdXNlWX07XHJcbn1cclxuZnVuY3Rpb24gQ29sb3IoX2lkLF9jKXtcclxuXHRjb25zb2xlLmxvZyhfaWQpO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9pZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdGNvbnNvbGUubG9nKF9pZCk7XHJcblx0XHRfYy5zdHJva2VTdHlsZT1faWQ7XHJcblx0fSxmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxpbmVTdHJva2VXaWR0aChfaWQsX2Mpe1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF9pZCkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXtcclxuXHRcdGNvbnNvbGUubG9nKF9pZCtcIl90b3VjaGVuZFwiKTtcclxuXHRcdHZhciBzdHJva2V3aWR0aDtcclxuXHRcdHN3aXRjaChfaWQpe1xyXG5cdFx0XHRjYXNlIFwic21hbGxcIjpcclxuXHRcdFx0XHRzdHJva2V3aWR0aD01O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFwibWlkZGxlXCI6XHJcblx0XHRcdFx0c3Ryb2tld2lkdGg9MTA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgXCJsYXJnZVwiOlxyXG5cdFx0XHRcdHN0cm9rZXdpZHRoPTIwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coc3Ryb2tld2lkdGgpO1xyXG5cdFx0X2MubGluZVdpZHRoPXN0cm9rZXdpZHRoO1xyXG5cdH0sZmFsc2UpO1xyXG5cclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfaWQpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKCl7XHJcblx0XHRjb25zb2xlLmxvZyhfaWQrXCJfY2xpY2tcIik7XHJcblx0XHR2YXIgc3Ryb2tld2lkdGg7XHJcblx0XHRzd2l0Y2goX2lkKXtcclxuXHRcdFx0Y2FzZSBcInNtYWxsXCI6XHJcblx0XHRcdFx0c3Ryb2tld2lkdGg9NTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBcIm1pZGRsZVwiOlxyXG5cdFx0XHRcdHN0cm9rZXdpZHRoPTEwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFwibGFyZ2VcIjpcclxuXHRcdFx0XHRzdHJva2V3aWR0aD0yMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKHN0cm9rZXdpZHRoKTtcclxuXHRcdF9jLmxpbmVXaWR0aD1zdHJva2V3aWR0aDtcclxuXHR9LGZhbHNlKTtcclxufVxyXG5cclxuLy/jg5bjg6njgqbjgrbjga7jg4fjg5Xjgqnjg6vjg4jli5XkvZzjgpLnpoHmraLjgZnjgotcclxuZnVuY3Rpb24gc3RvcERlZmF1bHQoZSl7XHJcblx0Ly9pZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJsaVwiKXtcclxuXHRcdC8vY29uc29sZS5sb2coZS50b3VjaGVzWzBdLnRhcmdldCk7XHJcblx0aWYoZS50b3VjaGVzWzBdLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJsaVwiKXtcclxuXHRcdC8vY29uc29sZS5sb2coZS50b3VjaGVzWzBdLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZihlLnRvdWNoZXNbMF0udGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJpbnB1dFwiKXtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59XHJcbiJdfQ==
