!function e(r,t,E){function a(i,R){if(!t[i]){if(!r[i]){var T="function"==typeof require&&require;if(!R&&T)return T(i,!0);if(n)return n(i,!0);var o=new Error("Cannot find module '"+i+"'");throw o.code="MODULE_NOT_FOUND",o}var u=t[i]={exports:{}};r[i][0].call(u.exports,function(e){var t=r[i][1][e];return a(t?t:e)},u,u.exports,e,r,t,E)}return t[i].exports}for(var n="function"==typeof require&&require,i=0;i<E.length;i++)a(E[i]);return a}({1:[function(e,r,t){"use strict";function E(e){37==e.keyCode?(a-=n,a%2==1&&(n++,console.log(n))):39==e.keyCode&&a++}var a=0,n=2;window.onload=function(){function e(e){var r,t=document.getElementById(e);if(t){switch(t.type){case"x-shader/x-vertex":r=u.createShader(u.VERTEX_SHADER);break;case"x-shader/x-fragment":r=u.createShader(u.FRAGMENT_SHADER);break;default:return}return u.shaderSource(r,t.text),u.compileShader(r),u.getShaderParameter(r,u.COMPILE_STATUS)?r:void alert(u.getShaderInfoLog(r))}}function r(e,r){var t=u.createProgram();return u.attachShader(t,e),u.attachShader(t,r),u.linkProgram(t),u.getProgramParameter(t,u.LINK_STATUS)?(u.useProgram(t),t):void alert(u.getProgramInfoLog(t))}function t(e){var r=u.createBuffer();return u.bindBuffer(u.ARRAY_BUFFER,r),u.bufferData(u.ARRAY_BUFFER,new Float32Array(e),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null),r}function n(e,r,t){for(var E in e)u.bindBuffer(u.ARRAY_BUFFER,e[E]),u.enableVertexAttribArray(r[E]),u.vertexAttribPointer(r[E],t[E],u.FLOAT,!1,0,0)}function i(e){var r=u.createBuffer();return u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Int16Array(e),u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null),r}function R(e){var r=new Image;r.onload=function(){var e=u.createTexture();u.bindTexture(u.TEXTURE_2D,e),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,r),u.generateMipmap(u.TEXTURE_2D),u.bindTexture(u.TEXTURE_2D,null),w=e},r.src=e}function T(e,r){var t=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,t);var E=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,E),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_COMPONENT16,e,r),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,E);var a=u.createTexture();return u.bindTexture(u.TEXTURE_2D,a),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,e,r,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),u.bindTexture(u.TEXTURE_2D,null),u.bindRenderbuffer(u.RENDERBUFFER,null),u.bindFramebuffer(u.FRAMEBUFFER,null),{f:t,d:E,t:a}}var o=document.getElementById("canvas");o.width=512,o.height=512,document.addEventListener("keydown",E);var u=o.getContext("webgl")||o.getContext("experimental-webgl"),f=e("vs"),_=e("fs"),A=r(f,_),c=[];c[0]=u.getAttribLocation(A,"position"),c[1]=u.getAttribLocation(A,"color"),c[2]=u.getAttribLocation(A,"textureCoord");var d=[];d[0]=3,d[1]=4,d[2]=2;var F=sphere(64,64,1,[1,1,1,1]),U=t(F.p),l=t(F.c),m=t(F.t),D=[U,l,m],b=i(F.i),B=[];B[0]=u.getUniformLocation(A,"mvpMatrix"),B[1]=u.getUniformLocation(A,"texture"),f=e("bvs"),_=e("bfs");var g=r(f,_),x=[];x[0]=u.getAttribLocation(g,"position"),x[1]=u.getAttribLocation(g,"color");var v=[];v[0]=3,v[1]=4;var L=[-1,1,0,1,1,0,-1,-1,0,1,-1,0],I=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],N=[0,1,2,3,2,1],P=t(L),s=t(I),M=[P,s],h=i(N),S=[];S[0]=u.getUniformLocation(g,"mvpMatrix"),S[1]=u.getUniformLocation(g,"texture"),S[2]=u.getUniformLocation(g,"useBlur");var X=new matIV,p=X.identity(X.create()),y=X.identity(X.create()),C=X.identity(X.create()),G=X.identity(X.create()),O=X.identity(X.create());u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),u.activeTexture(u.TEXTURE0);var w=null;R("../img/test.jpg");var Y=512,H=512,k=T(Y,H),W=!0;!function q(){u.bindFramebuffer(u.FRAMEBUFFER,k.f),u.clearColor(1,0,1,1),u.clearDepth(1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.useProgram(A),n(D,c,d),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,b);var e=a%360*Math.PI/180;X.lookAt([0,0,5],[0,0,0],[0,1,0],y),X.perspective(45,o.width/o.height,.1,100,C),X.multiply(C,y,G),u.bindTexture(u.TEXTURE_2D,w),X.identity(p),X.rotate(p,e,[0,1,0],p),X.multiply(G,p,O),u.uniformMatrix4fv(B[0],!1,O),u.uniform1i(B[1],0),u.drawElements(u.TRIANGLES,F.i.length,u.UNSIGNED_SHORT,0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.clearColor(0,0,0,1),u.clearDepth(1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.useProgram(g),n(M,x,v),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,h),u.bindTexture(u.TEXTURE_2D,k.t),X.lookAt([0,0,.5],[0,0,0],[0,1,0],y),X.ortho(-1,1,1,-1,.1,1,C),X.multiply(C,y,G),X.identity(p),X.multiply(G,p,O),u.uniformMatrix4fv(S[0],!1,O),u.uniform1i(S[1],0),u.uniform1i(S[2],W),u.drawElements(u.TRIANGLES,N.length,u.UNSIGNED_SHORT,0),u.flush(),requestAnimationFrame(q)}()}},{}]},{},[1]);